import{$ as me,$a as V,A as D,C as b,E as m,F as L,G as M,H as l,I as c,J as y,La as xe,M as T,Ma as _e,N as v,O as x,R as X,S as ee,T as te,U as d,Ua as Y,V as S,Va as be,W as P,Wa as ve,X as F,Xa as Ce,Y as _,Ya as B,Z as C,_ as ae,a as ne,ab as N,c as pe,ca as U,d as ie,da as R,e as oe,ea as fe,eb as Pe,f as re,fa as z,fb as we,g as K,gb as ye,h as de,ka as ue,m as O,n as k,o as H,p as W,s as A,t as ge,v as J,w as he,x as r,y as E}from"./chunk-BJTP6EOT.js";import"./chunk-PHJ65MTQ.js";import"./chunk-NGAVIYQ2.js";import"./chunk-DFS7RQGK.js";import"./chunk-IP3IRUG3.js";import"./chunk-YUJWRDDX.js";import"./chunk-HC6MZPB3.js";import"./chunk-QOCRLRQJ.js";import"./chunk-RMJ7PCZJ.js";import"./chunk-LSZSCLUI.js";import"./chunk-T6LT6B37.js";import"./chunk-QAYK5YJO.js";import"./chunk-EZ6AITSJ.js";import"./chunk-GNOVVPTF.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import"./chunk-HE67GXZG.js";import"./chunk-MCRJI3T3.js";import"./chunk-BAKMWPBW.js";import"./chunk-WIHZARLN.js";import"./chunk-SHBHU4SH.js";import"./chunk-LDACFNHN.js";import"./chunk-UNCAF6UQ.js";import"./chunk-WR6SSK3X.js";import"./chunk-ZD3NZWAU.js";import"./chunk-JWIEPCRG.js";import"./chunk-C5RQ2IC2.js";import"./chunk-SV7S5NYR.js";import{a as Q,b as j,i as G}from"./chunk-OYAVQN5W.js";function Te(i,a){if(i&1){let o=T();l(0,"div",13),v("click",function(){let t=O(o).$implicit,n=x();return k(n.selectDate(t))}),d(1),_(2,"translate"),c()}if(i&2){let o=a.$implicit;r(),S(C(2,1,o))}}var ke=(()=>{let a=class a{constructor(){this.close=new A,this.liveClick=new A,this.dateFilter=new A,this.channelFilter=new A,this.selectedDate="Today",this.selectedChannel="All channels",this.showDateDropdown=!1,this.showChannelDropdown=!1,this.dateOptions=[]}ngOnInit(){this.generateDateOptions()}generateDateOptions(){let e=new Date;new Date(e).setDate(e.getDate()-1);let n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];this.dateOptions=[],this.dateOptions.push("Yesterday"),this.dateOptions.push("Today");for(let s=1;s<=5;s++){let p=new Date(e);p.setDate(e.getDate()+s);let h=n[p.getDay()];this.dateOptions.push(h.charAt(0).toUpperCase()+h.slice(1))}}onClose(){this.close.emit()}onLiveClick(){this.liveClick.emit()}toggleDateFilter(){this.showDateDropdown=!this.showDateDropdown,this.showChannelDropdown=!1}toggleChannelFilter(){this.showChannelDropdown=!this.showChannelDropdown,this.showDateDropdown=!1}selectDate(e){this.selectedDate=e,this.showDateDropdown=!1;let t=this.getDayInfo(e);this.dateFilter.emit(t)}getDayInfo(e){let t=new Date,n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];if(e==="Yesterday"){let s=new Date(t);s.setDate(t.getDate()-1);let p=n[s.getDay()];return`${p.charAt(0).toUpperCase()+p.slice(1)}`}else if(e==="Today"){let s=n[t.getDay()];return`${s.charAt(0).toUpperCase()+s.slice(1)}`}else return e}selectChannel(e){this.changeSelectedChannel(e),this.showChannelDropdown=!1,this.channelFilter.emit(e)}changeSelectedChannel(e){switch(e){case"all":this.selectedChannel="All channels";break;case"french":this.selectedChannel="French channels";break;case"arabic":this.selectedChannel="Arabic channels";break;case"free":this.selectedChannel="Free channels";break;case"paid":this.selectedChannel="Paid channels";break;case"authorized":this.selectedChannel="Authorized channels";break}}};a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=D({type:a,selectors:[["app-epg-header"]],outputs:{close:"close",liveClick:"liveClick",dateFilter:"dateFilter",channelFilter:"channelFilter"},decls:45,vars:32,consts:[[1,"epg-header"],[1,"epg-header-left"],[1,"epg-header-item","clickable-button",3,"click"],["width","16","height","16","viewBox","0 0 32 33","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M7.99967 31.3265H23.9997C24.7361 31.3265 25.333 30.7296 25.333 29.9932C25.333 29.2568 24.7361 28.6599 23.9997 28.6599H7.99967C7.2633 28.6599 6.66634 29.2568 6.66634 29.9932C6.66634 30.7296 7.2633 31.3265 7.99967 31.3265ZM26.3706 6.28896C29.1025 9.02088 30.6663 12.7182 30.6663 16.6599C30.6663 20.6015 29.1025 24.2988 26.3706 27.0308C25.8499 27.5515 25.0057 27.5515 24.485 27.0308C23.9643 26.5101 23.9643 25.6658 24.485 25.1451C26.7217 22.9084 27.9997 19.887 27.9997 16.6599C27.9997 13.4327 26.7217 10.4114 24.485 8.17458C23.9643 7.65388 23.9643 6.80966 24.485 6.28896C25.0057 5.76826 25.8499 5.76826 26.3706 6.28896ZM7.51439 6.28896C8.03509 6.80966 8.03509 7.65388 7.51439 8.17458C5.27762 10.4114 3.99967 13.4327 3.99967 16.6599C3.99967 19.887 5.27762 22.9084 7.51439 25.1451C8.03509 25.6658 8.03509 26.5101 7.51439 27.0308C6.99369 27.5515 6.14947 27.5515 5.62878 27.0308C2.89686 24.2988 1.33301 20.6015 1.33301 16.6599C1.33301 12.7182 2.89686 9.02088 5.62878 6.28896C6.14947 5.76826 6.99369 5.76826 7.51439 6.28896ZM11.2856 10.0602C11.8063 10.5809 11.8063 11.4251 11.2856 11.9458C10.0426 13.1889 9.33301 14.8665 9.33301 16.6599C9.33301 18.4532 10.0426 20.1309 11.2856 21.3739C11.8063 21.8946 11.8063 22.7388 11.2856 23.2595C10.7649 23.7802 9.92071 23.7802 9.40001 23.2595C7.66183 21.5213 6.66634 19.1677 6.66634 16.6599C6.66634 14.152 7.66183 11.7984 9.40001 10.0602C9.92071 9.5395 10.7649 9.5395 11.2856 10.0602ZM22.5993 10.0602C24.3375 11.7984 25.333 14.152 25.333 16.6599C25.333 19.1677 24.3375 21.5213 22.5993 23.2595C22.0786 23.7802 21.2344 23.7802 20.7137 23.2595C20.193 22.7388 20.193 21.8946 20.7137 21.3739C21.9568 20.1309 22.6663 18.4532 22.6663 16.6599C22.6663 14.8665 21.9568 13.1889 20.7137 11.9458C20.193 11.4251 20.193 10.5809 20.7137 10.0602C21.2344 9.5395 22.0786 9.5395 22.5993 10.0602ZM15.9997 12.6599C18.2088 12.6599 19.9997 14.4507 19.9997 16.6599C19.9997 18.869 18.2088 20.6599 15.9997 20.6599C13.7905 20.6599 11.9997 18.869 11.9997 16.6599C11.9997 14.4507 13.7905 12.6599 15.9997 12.6599Z","fill","white"],[1,"filter-dropdown"],[1,"epg-header-item","filter-button",3,"click"],["src","../../../../assets/icon/calendar-icon.png","alt","",2,"height","16px"],["width","12","height","12","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M7 10L12 15L17 10","stroke","white","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"dropdown-menu"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],["src","../../../../assets/icon/filter-icon.png","alt","",2,"height","16px"],[1,"dropdown-item",3,"click"],[1,"epg-nav-arrows"],["fill","clear",1,"epg-nav-arrow",3,"click"],["src","../../../../assets/icon/back-settings.png","alt","",2,"height","14px"]],template:function(t,n){t&1&&(l(0,"div",0)(1,"div",1)(2,"button",2),v("click",function(){return n.onLiveClick()}),H(),l(3,"svg",3),y(4,"path",4),c(),d(5),_(6,"translate"),c(),W(),l(7,"div",5)(8,"button",6),v("click",function(){return n.toggleDateFilter()}),y(9,"img",7),d(10),_(11,"translate"),H(),l(12,"svg",8),y(13,"path",9),c()(),W(),l(14,"div",10),b(15,Te,3,3,"div",11),c()(),l(16,"div",5)(17,"button",6),v("click",function(){return n.toggleChannelFilter()}),y(18,"img",12),d(19),_(20,"translate"),H(),l(21,"svg",8),y(22,"path",9),c()(),W(),l(23,"div",10)(24,"div",13),v("click",function(){return n.selectChannel("all")}),d(25),_(26,"translate"),c(),l(27,"div",13),v("click",function(){return n.selectChannel("french")}),d(28),_(29,"translate"),c(),l(30,"div",13),v("click",function(){return n.selectChannel("arabic")}),d(31),_(32,"translate"),c(),l(33,"div",13),v("click",function(){return n.selectChannel("free")}),d(34),_(35,"translate"),c(),l(36,"div",13),v("click",function(){return n.selectChannel("paid")}),d(37),_(38,"translate"),c(),l(39,"div",13),v("click",function(){return n.selectChannel("authorized")}),d(40),_(41,"translate"),c()()()(),l(42,"div",14)(43,"ion-button",15),v("click",function(){return n.onClose()}),y(44,"img",16),c()()()),t&2&&(r(5),P(" ",C(6,14,"live")," "),r(5),P(" ",C(11,16,n.selectedDate)," "),r(4),M("show",n.showDateDropdown),r(),m("ngForOf",n.dateOptions),r(4),P(" ",C(20,18,n.selectedChannel)," "),r(4),M("show",n.showChannelDropdown),r(2),P(" ",C(26,20,"All channels")," "),r(3),P(" ",C(29,22,"French channels")," "),r(3),P(" ",C(32,24,"Arabic channels")," "),r(3),P(" ",C(35,26,"Free channels")," "),r(3),P(" ",C(38,28,"Paid channels")," "),r(3),P(" ",C(41,30,"Authorized channels")," "))},dependencies:[z,U,B,Y,N,V],styles:[".epg-header[_ngcontent-%COMP%]{background-color:#2a3441;padding:10px 12px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #3a4651}.epg-header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:24px}.epg-header-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;color:#e2e8f0;font-size:10px;font-weight:500;background:none;border:none;cursor:pointer;padding:0;transition:opacity .2s ease}.epg-header-item[_ngcontent-%COMP%]:hover{opacity:.8}.clickable-button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:0}.filter-dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.filter-button[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:0}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;background-color:#2a3441;border:1px solid #3a4651;border-radius:6px;min-width:160px;box-shadow:0 4px 6px #0000001a;z-index:1000;opacity:0;visibility:hidden;transform:translateY(-10px);transition:all .2s ease}.dropdown-menu.show[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0)}.dropdown-item[_ngcontent-%COMP%]{padding:8px 12px;color:#e2e8f0;font-size:10px;font-weight:500;cursor:pointer;transition:background-color .2s ease}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#3a4651}.dropdown-item[_ngcontent-%COMP%]:first-child{border-radius:6px 6px 0 0}.dropdown-item[_ngcontent-%COMP%]:last-child{border-radius:0 0 6px 6px}.live-indicator[_ngcontent-%COMP%]{width:8px;height:8px;background-color:#ef4444;border-radius:50%;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.epg-nav-arrows[_ngcontent-%COMP%]{display:flex;gap:8px}.epg-nav-arrow[_ngcontent-%COMP%]{--color: #e2e8f0;--background: #3a4651;--background-hover: #4a5661;height:16px}"]});let i=a;return i})();function De(i,a){i&1&&(l(0,"div",5),d(1),_(2,"translate"),c()),i&2&&(r(),S(C(2,1,"live")))}function Le(i,a){if(i&1&&(l(0,"div",6),d(1),_(2,"translate"),c()),i&2){let o=x();r(),F(" ",o.program.duration," ",C(2,2,"min")," ")}}var ce=(()=>{let a=class a{constructor(){this.timeSlotDuration=30,this.slotWidth=140,this.programWidth=140,this.programLeft=0}ngOnInit(){this.calculateProgramDimensions()}calculateProgramDimensions(){let e=this.timeToMinutes(this.program.startTime),t=this.timeToMinutes(this.program.endTime),n=t-e;n<=0&&(n=24*60-e+t);let s=n/this.timeSlotDuration;this.programWidth=s*this.slotWidth;let p=e;this.programLeft=p/this.timeSlotDuration*this.slotWidth,this.programWidth=Math.max(this.programWidth,80)}timeToMinutes(e){let[t,n]=e.split(":").map(Number);return t*60+n}};a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=D({type:a,selectors:[["app-epg-program"]],inputs:{program:"program",timeSlotDuration:"timeSlotDuration",slotWidth:"slotWidth"},decls:7,vars:15,consts:[[1,"epg-program"],["class","live-badge",4,"ngIf"],[1,"program-time"],[1,"program-title"],["class","program-details",4,"ngIf"],[1,"live-badge"],[1,"program-details"]],template:function(t,n){t&1&&(l(0,"div",0),b(1,De,3,3,"div",1),l(2,"div",2),d(3),c(),l(4,"div",3),d(5),c(),b(6,Le,3,4,"div",4),c()),t&2&&(L("width",n.programWidth-4,"px")("left",n.programLeft,"px"),M("highlighted",n.program.isHighlighted)("live",n.program.isLive)("placeholder",n.program.isPlaceholder),r(),m("ngIf",n.program.isLive&&!n.program.isPlaceholder),r(2),F("",n.program.startTime,"-",n.program.endTime,""),r(2),S(n.program.title),r(),m("ngIf",n.program.duration))},dependencies:[z,R,B,N,V],styles:[".epg-program[_ngcontent-%COMP%]{background-color:#334155;border-radius:6px;padding:4px;min-width:100px;cursor:pointer;transition:background-color .2s ease;position:absolute;display:flex;flex-direction:column;justify-content:center;height:56px;overflow:hidden;border-right:1px solid #3a4651;top:2px}.epg-program[_ngcontent-%COMP%]:hover{background-color:#1e293b}.epg-program.highlighted[_ngcontent-%COMP%]{border-radius:8px;background-color:#1e293b}.epg-program.live[_ngcontent-%COMP%]{position:relative}.epg-program.placeholder[_ngcontent-%COMP%]{background-color:#1a202c;border:1px dashed #4a5568;opacity:.7}.epg-program.placeholder[_ngcontent-%COMP%]   .program-title[_ngcontent-%COMP%]{color:#718096;font-style:italic}.epg-program.placeholder[_ngcontent-%COMP%]   .program-time[_ngcontent-%COMP%]{color:#4a5568}.live-badge[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;background-color:#ef4444;color:#fff;padding:2px 6px;border-radius:4px;font-size:10px;font-weight:700}.program-time[_ngcontent-%COMP%]{font-size:10px;color:#94a3b8;margin-bottom:0}.program-title[_ngcontent-%COMP%]{font-size:10px;font-weight:500;margin-bottom:0;color:#e2e8f0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.program-details[_ngcontent-%COMP%]{font-size:10px;color:#94a3b8}"]});let i=a;return i})();var Me=(()=>{let a=class a{constructor(){}generateEpgData(e){let t=new Date,n=t.getHours().toString().padStart(2,"0")+":"+t.getMinutes().toString().padStart(2,"0"),s=[];for(let g=0;g<24;g++)for(let f=0;f<60;f+=30){let u=g.toString().padStart(2,"0")+":"+f.toString().padStart(2,"0");s.push({time:u,label:u})}let p=e.map(g=>{let f=[];if(g.programmeDetails&&g.programmeDetails.length>0){let u=this.createCompleteSchedule(g.programmeDetails,g._id,n);f.push(...u)}else f.push({id:`${g._id}-placeholder-fullday`,title:"No programme for this time",startTime:"00:00",endTime:"23:59",description:"No programme information available",isLive:this.isTimeInRange(n,"00:00","23:59"),isHighlighted:!1,isPlaceholder:!0});return{channel:g,programs:f}});return pe({currentTime:n,timeSlots:s,channelSchedules:p})}isProgramLive(e,t){return e.start<=t&&e.end>t}getCurrentTimePosition(){let e=new Date,t=e.getHours(),n=e.getMinutes(),s=t*60+n,p=Math.floor(s/30),h=s%30;return p*140+h/30*140}createCompleteSchedule(e,t,n){var f,u,I;let s=[],p=e.sort((w,$)=>w.start.localeCompare($.start)),h="00:00",g=0;for(let w of p)h<w.start&&(s.push({id:`${t}-placeholder-${g}`,title:"No programme for this time",startTime:h,endTime:w.start,description:"No programme information available",isLive:this.isTimeInRange(n,h,w.start),isHighlighted:!1,isPlaceholder:!0}),g++),s.push({id:w._id||`${t}-program-${g}`,title:((f=w.emissionId)==null?void 0:f.label)||"Programme",startTime:w.start,endTime:w.end,description:((u=w.emissionId)==null?void 0:u.description)||"",duration:((I=w.emissionId)==null?void 0:I.duree)||0,isLive:this.isTimeInRange(n,w.start,w.end),isHighlighted:this.isTimeInRange(n,w.start,w.end),isPlaceholder:!1}),g++,h=w.end;return h<"23:59"&&s.push({id:`${t}-placeholder-${g}`,title:"No programme for this time",startTime:h,endTime:"23:59",description:"No programme information available",isLive:this.isTimeInRange(n,h,"23:59"),isHighlighted:!1,isPlaceholder:!0}),s}generateTimeSlots(){let e=[];for(let t=0;t<24;t++)for(let n=0;n<60;n+=30)e.push(t.toString().padStart(2,"0")+":"+n.toString().padStart(2,"0"));return e}isTimeInRange(e,t,n){return e>=t&&e<n}};a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=K({token:a,factory:a.\u0275fac,providedIn:"root"});let i=a;return i})();var ze=["timeSlotsContainer"],Be=["channelsScrollWrapper"],Ve=["epgContainer"];function Ne(i,a){if(i&1&&(l(0,"div",30),d(1),c()),i&2){let o=a.$implicit;r(),P(" ",o.label," ")}}function qe(i,a){if(i&1&&(l(0,"div",31)(1,"div",32),y(2,"img",33),c(),l(3,"div",34),d(4),c()()),i&2){let o=a.$implicit;r(2),m("src",o.channel.logo,J)("alt",o.channel.name),r(2),S(o.channel.name)}}function He(i,a){if(i&1&&y(0,"app-epg-program",37),i&2){let o=a.$implicit;m("program",o)("timeSlotDuration",30)("slotWidth",140)}}function We(i,a){if(i&1&&(l(0,"div",35),b(1,He,1,3,"app-epg-program",36),c()),i&2){let o=a.$implicit;r(),m("ngForOf",o.programs)}}function Ae(i,a){if(i&1){let o=T();l(0,"div",4)(1,"app-epg-header",5),v("close",function(){O(o);let t=x();return k(t.onClose())})("dateFilter",function(t){O(o);let n=x();return k(n.onDateFilter(t))})("channelFilter",function(t){O(o);let n=x();return k(n.onChannelFilter(t))}),c(),l(2,"div",6)(3,"div",7)(4,"div",8)(5,"span",9),d(6),_(7,"translate"),c()(),l(8,"div",10)(9,"ion-button",11),v("click",function(){O(o);let t=x();return k(t.scrollPrevious())}),H(),l(10,"svg",12),y(11,"path",13),c()(),W(),l(12,"ion-button",14),v("click",function(){O(o);let t=x();return k(t.scrollNext())}),H(),l(13,"svg",12),y(14,"path",15),c()()(),W(),l(15,"div",16,0)(17,"div",17)(18,"div",18)(19,"div",19),d(20),c()(),b(21,Ne,2,1,"div",20),c()()(),l(22,"div",21,1)(24,"div",22)(25,"div",23),b(26,qe,5,3,"div",24),c(),l(27,"div",25,2)(29,"div",26)(30,"div",27)(31,"div",28),d(32),c()(),b(33,We,2,1,"div",29),c()()()()()()}if(i&2){let o=x();r(6),S(C(7,10,"Today")),r(12),L("left",o.currentTimePosition,"%"),r(2),S(o.epgData.currentTime),r(),m("ngForOf",o.epgData.timeSlots),r(5),m("ngForOf",o.epgData.channelSchedules),r(4),L("left",o.currentTimePosition,"px"),r(2),P(" ",o.getCurrentTime()," "),r(),m("ngForOf",o.epgData.channelSchedules)}}var Se=(()=>{let a=class a{constructor(e){this.epgService=e,this.channels=[],this.weeklyEpgData=null,this.originalChannels=[],this.close=new A,this.epgData=null,this.currentTimePosition=0,this.isLoading=!0,this.isScrollingSynced=!1}ngOnInit(){this.originalChannels=[...this.channels],this.loadEpgData(),this.updateCurrentTimePosition(),this.timeUpdateInterval=setInterval(()=>{this.updateCurrentTimePosition()},6e4)}ngAfterViewInit(){this.setupScrollSync(),setTimeout(()=>{this.scrollToCurrentTime()},100)}ngOnDestroy(){this.timeUpdateInterval&&clearInterval(this.timeUpdateInterval)}setupScrollSync(){if(this.timeSlotsContainer&&this.channelsScrollWrapper){let e=this.timeSlotsContainer.nativeElement,t=this.channelsScrollWrapper.nativeElement;e.addEventListener("scroll",()=>{this.isScrollingSynced||(this.isScrollingSynced=!0,t.scrollLeft=e.scrollLeft,setTimeout(()=>this.isScrollingSynced=!1,10))}),t.addEventListener("scroll",()=>{this.isScrollingSynced||(this.isScrollingSynced=!0,e.scrollLeft=t.scrollLeft,setTimeout(()=>this.isScrollingSynced=!1,10))})}}updateCurrentTimePosition(){this.currentTimePosition=this.epgService.getCurrentTimePosition()}loadEpgData(){this.isLoading=!0,this.weeklyEpgData?this.processWeeklyEpgData(this.weeklyEpgData):this.epgService.generateEpgData(this.channels).subscribe(e=>{this.epgData=e,this.isLoading=!1,this.updateCurrentTimePosition(),setTimeout(()=>{this.scrollToCurrentTime()},100)})}processWeeklyEpgData(e){try{let t=new Date,n=this.getDayNameFromDate(t),s=this.channels.map(p=>{var g;let h=(g=e.channels)==null?void 0:g.find(f=>f._id===p._id);if(h&&h.weeklyPrograms){let f=[];if(Array.isArray(h.weeklyPrograms)&&h.weeklyPrograms[0]){let u=h.weeklyPrograms[0];u[n]&&Array.isArray(u[n])&&f.push(...u[n])}else typeof h.weeklyPrograms=="object"&&Object.keys(h.weeklyPrograms).forEach(u=>{Array.isArray(h.weeklyPrograms[u])&&f.push(...h.weeklyPrograms[u])});return j(Q({},p),{weeklyPrograms:h.weeklyPrograms,programmeDetails:f})}return p});this.epgService.generateEpgData(s).subscribe(p=>{this.epgData=p,this.isLoading=!1,this.updateCurrentTimePosition(),setTimeout(()=>{this.scrollToCurrentTime()},100)})}catch(t){console.error("Error processing weekly EPG data:",t),this.epgService.generateEpgData(this.channels).subscribe(n=>{this.epgData=n,this.isLoading=!1,this.updateCurrentTimePosition(),setTimeout(()=>{this.scrollToCurrentTime()},100)})}}scrollToCurrentTime(){if(this.timeSlotsContainer&&this.channelsScrollWrapper&&this.currentTimePosition>0){let e=Math.max(0,this.currentTimePosition-300);this.timeSlotsContainer.nativeElement.scrollLeft=e,this.channelsScrollWrapper.nativeElement.scrollLeft=e}}getCurrentTime(){let e=new Date;return e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")}onClose(){this.close.emit()}onKeyDown(e){switch(e.key){case"ArrowLeft":e.preventDefault(),this.scrollPrevious();break;case"ArrowRight":e.preventDefault(),this.scrollNext();break;case"ArrowUp":this.scrollContainerVertically(-100);break;case"ArrowDown":this.scrollContainerVertically(100);break;case"Home":e.preventDefault(),this.scrollToBeginning();break;case"End":e.preventDefault(),this.scrollToEnd();break}}scrollToBeginning(){this.timeSlotsContainer&&this.channelsScrollWrapper&&(this.timeSlotsContainer.nativeElement.scrollTo({left:0,behavior:"smooth"}),this.channelsScrollWrapper.nativeElement.scrollTo({left:0,behavior:"smooth"}))}scrollToEnd(){this.timeSlotsContainer&&this.channelsScrollWrapper&&(this.timeSlotsContainer.nativeElement.scrollTo({left:6580,behavior:"smooth"}),this.channelsScrollWrapper.nativeElement.scrollTo({left:6580,behavior:"smooth"}))}scrollNext(){if(this.timeSlotsContainer&&this.channelsScrollWrapper){let t=this.timeSlotsContainer.nativeElement.scrollLeft,n=this.timeSlotsContainer.nativeElement.scrollWidth-this.timeSlotsContainer.nativeElement.clientWidth,s=47*140,p=Math.min(n,s-this.timeSlotsContainer.nativeElement.clientWidth+140);if(t>=p-10)return;let h=Math.min(p,t+700);this.timeSlotsContainer.nativeElement.scrollTo({left:h,behavior:"smooth"}),this.channelsScrollWrapper.nativeElement.scrollTo({left:h,behavior:"smooth"})}}scrollPrevious(){if(this.timeSlotsContainer&&this.channelsScrollWrapper){let t=this.timeSlotsContainer.nativeElement.scrollLeft;if(t<=10)return;let n=Math.max(0,t-700);this.timeSlotsContainer.nativeElement.scrollTo({left:n,behavior:"smooth"}),this.channelsScrollWrapper.nativeElement.scrollTo({left:n,behavior:"smooth"})}}scrollContainerVertically(e){var f;let t=(f=this.epgContainer)==null?void 0:f.nativeElement;if(!t)return;let n=t.scrollTop,s=n+e,p=200,h=performance.now(),g=u=>{let I=u-h,w=Math.min(I/p,1),$=.5*(1-Math.cos(Math.PI*w));t.scrollTop=n+(s-n)*$,w<1&&requestAnimationFrame(g)};requestAnimationFrame(g)}onDateFilter(e){if(this.isLoading=!0,this.weeklyEpgData&&this.weeklyEpgData.channels){let t=this.weeklyEpgData.channels.map(s=>{let p=[];Array.isArray(s.weeklyPrograms)&&s.weeklyPrograms[0]?p=s.weeklyPrograms[0][e]||[]:typeof s.weeklyPrograms=="object"&&s.weeklyPrograms[e]&&(p=s.weeklyPrograms[e]||[]);let h={[e]:p};return j(Q({},s),{weeklyPrograms:h})}),n=j(Q({},this.weeklyEpgData),{channels:t});this.processWeeklyEpgData(n)}else this.loadEpgData()}onChannelFilter(e){if(this.isLoading=!0,this.weeklyEpgData&&this.weeklyEpgData.channels){let t=new Date,n=this.getDayNameFromDate(t),s=this.weeklyEpgData.channels;e!=="all"?(s=this.weeklyEpgData.channels.filter(g=>!g.tags||!Array.isArray(g.tags)?!1:g.tags.some(u=>{switch(e){case"french":return u.toLowerCase().includes("fran\xE7ais")||u.toLowerCase().includes("french");case"arabic":return u.toLowerCase().includes("tunisien")||u.toLowerCase().includes("arabic")||u.toLowerCase().includes("cha\xEEnes tunisiennes");case"free":return u.toLowerCase()==="free";case"paid":return u.toLowerCase()==="paid";case"authorized":return u.toLowerCase()==="authorized";default:return u.toLowerCase()===e.toLowerCase()}})),this.channels=this.originalChannels.filter(g=>s.some(f=>f._id===g._id))):(this.channels=[...this.originalChannels],s=this.weeklyEpgData.channels);let p=s.map(g=>{if(g.weeklyPrograms){let f=[];return Array.isArray(g.weeklyPrograms)&&g.weeklyPrograms[0]?f=g.weeklyPrograms[0][n]||[]:typeof g.weeklyPrograms=="object"&&g.weeklyPrograms[n]&&(f=g.weeklyPrograms[n]||[]),j(Q({},g),{weeklyPrograms:{[n]:f}})}return g}),h=j(Q({},this.weeklyEpgData),{channels:p});this.processWeeklyEpgData(h)}else this.loadEpgData()}getDayNameFromDate(e){return["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"][e.getDay()]}};a.\u0275fac=function(t){return new(t||a)(E(Me))},a.\u0275cmp=D({type:a,selectors:[["app-epg"]],viewQuery:function(t,n){if(t&1&&(X(ze,5),X(Be,5),X(Ve,5)),t&2){let s;ee(s=te())&&(n.timeSlotsContainer=s.first),ee(s=te())&&(n.channelsScrollWrapper=s.first),ee(s=te())&&(n.epgContainer=s.first)}},hostBindings:function(t,n){t&1&&v("keydown",function(p){return n.onKeyDown(p)})},inputs:{channels:"channels",weeklyEpgData:"weeklyEpgData"},outputs:{close:"close"},decls:1,vars:1,consts:[["timeSlotsContainer",""],["epgContainer",""],["channelsScrollWrapper",""],["class","epg-container","tabindex","0",4,"ngIf"],["tabindex","0",1,"epg-container"],[3,"close","dateFilter","channelFilter"],[1,"epg-content"],[1,"epg-time-header"],[1,"epg-channel-column"],[1,"today-label"],[1,"epg-navigation-controls",2,"opacity","0"],["fill","clear","size","small","tabindex","0","title","Previous (Arrow Left)",1,"nav-button",3,"click"],["width","16","height","16","viewBox","0 0 32 33","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M19.6097 9.60337C19.8526 9.3519 19.987 9.01509 19.9839 8.6655C19.9809 8.3159 19.8407 7.98149 19.5935 7.73427C19.3462 7.48706 19.0118 7.34684 18.6622 7.3438C18.3126 7.34076 17.9758 7.47516 17.7244 7.71803L9.72437 15.718C9.47441 15.9681 9.33398 16.3071 9.33398 16.6607C9.33398 17.0143 9.47441 17.3533 9.72437 17.6034L17.7244 25.6034C17.9758 25.8462 18.3126 25.9806 18.6622 25.9776C19.0118 25.9746 19.3462 25.8343 19.5935 25.5871C19.8407 25.3399 19.9809 25.0055 19.9839 24.6559C19.987 24.3063 19.8526 23.9695 19.6097 23.718L12.5524 16.6607L19.6097 9.60337Z","fill","white"],["fill","clear","size","small","tabindex","0","title","Next (Arrow Right)",1,"nav-button",3,"click"],["fill-rule","evenodd","clip-rule","evenodd","d","M12.3903 23.7169C12.1474 23.9684 12.013 24.3052 12.0161 24.6548C12.0191 25.0044 12.1593 25.3388 12.4065 25.586C12.6538 25.8332 12.9882 25.9735 13.3378 25.9765C13.6874 25.9795 14.0242 25.8452 14.2756 25.6023L22.2756 17.6023C22.5256 17.3522 22.666 17.0132 22.666 16.6596C22.666 16.3061 22.5256 15.967 22.2756 15.7169L14.2756 7.71695C14.0242 7.47407 13.6874 7.33968 13.3378 7.34271C12.9882 7.34575 12.6538 7.48598 12.4065 7.73319C12.1593 7.9804 12.0191 8.31482 12.0161 8.66441C12.013 9.01401 12.1474 9.35081 12.3903 9.60228L19.4476 16.6596L12.3903 23.7169Z","fill","white"],[1,"epg-time-slots-container"],[1,"epg-time-slots"],[1,"current-time-indicator"],[1,"current-time-label"],["class","epg-time-slot",4,"ngFor","ngForOf"],[1,"epg-channels-container"],[1,"epg-channels-layout"],[1,"epg-channels-info-column"],["class","epg-channel-info-item",4,"ngFor","ngForOf"],[1,"epg-channels-scroll-wrapper"],[1,"epg-channels-content"],[1,"current-time-line"],[1,"current-time"],["class","epg-programs-row",4,"ngFor","ngForOf"],[1,"epg-time-slot"],[1,"epg-channel-info-item"],[1,"epg-channel-logo"],[3,"src","alt"],[1,"epg-channel-name"],[1,"epg-programs-row"],[3,"program","timeSlotDuration","slotWidth",4,"ngFor","ngForOf"],[3,"program","timeSlotDuration","slotWidth"]],template:function(t,n){t&1&&b(0,Ae,34,12,"div",3),t&2&&m("ngIf",n.epgData)},dependencies:[z,U,R,B,Y,ke,ce,N,V],styles:[".epg-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#2a3441;color:#fff;z-index:100030;display:flex;flex-direction:column}.epg-container[_ngcontent-%COMP%]:focus{outline:2px solid var(--ion-color-primary, #3880ff);outline-offset:2px}.epg-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:calc(100% - 37px);overflow:hidden}.epg-time-header[_ngcontent-%COMP%]{display:flex;background-color:#2a3441;border-bottom:1px solid #3a4651;position:sticky;top:0;z-index:10}.epg-channel-column[_ngcontent-%COMP%]{width:180px;min-width:180px;padding:6px;background-color:#2a3441;border-right:1px solid #3a4651;display:flex;align-items:center;gap:8px;justify-content:center}.today-label[_ngcontent-%COMP%]{background-color:#06b6d4;color:#fff;padding:2px 6px;border-radius:4px;font-size:10px}.current-time[_ngcontent-%COMP%]{color:#fff;font-size:10px;background:#ef4444;padding:4px;border-radius:4px;position:absolute;z-index:121212;left:-15px;top:0}.epg-time-slots-container[_ngcontent-%COMP%]{flex:1;overflow-x:hidden;overflow-y:hidden}.epg-time-slots[_ngcontent-%COMP%]{display:flex;position:relative;min-width:fit-content}.epg-time-slot[_ngcontent-%COMP%]{width:140px;min-width:140px;flex-shrink:0;padding:7px;text-align:center;font-size:11px;color:#94a3b8;border-right:1px solid #3a4651;display:flex;align-items:center;justify-content:center}.current-time-indicator[_ngcontent-%COMP%]{position:absolute;top:0;width:2px;background-color:#ef4444;z-index:15;height:calc(100vh - 60px);pointer-events:none}.current-time-label[_ngcontent-%COMP%]{position:absolute;top:-8px;left:-20px;background-color:#ef4444;color:#fff;padding:2px 6px;border-radius:4px;font-size:12px;font-weight:700}.epg-channels-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden}.epg-channels-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.epg-channels-layout[_ngcontent-%COMP%]{display:flex}.epg-channels-info-column[_ngcontent-%COMP%]{width:180px;min-width:180px;background-color:#2a3441;border-right:1px solid #3a4651;position:sticky;left:0;z-index:5}.epg-channel-info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;padding:6px 12px;height:60px;border-bottom:1px solid #3a4651}.epg-channel-logo[_ngcontent-%COMP%]{display:flex;align-items:center}.epg-channel-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:36px;height:auto;object-fit:contain;max-height:36px}.epg-channel-name[_ngcontent-%COMP%]{color:#e2e8f0;font-weight:500;font-size:10px}.epg-channels-scroll-wrapper[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:hidden;flex:1}.epg-channels-content[_ngcontent-%COMP%]{min-width:fit-content;position:relative}.current-time-line[_ngcontent-%COMP%]{position:absolute;top:0;width:2px;height:100%;background-color:#ef4444;z-index:20;pointer-events:none}.epg-programs-row[_ngcontent-%COMP%]{position:relative;height:60px;border-bottom:1px solid #3a4651;min-width:6720px}.epg-channels-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.epg-channels-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff0d}.epg-channels-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#09f,#0c9);border-radius:4px}.epg-navigation-controls[_ngcontent-%COMP%]{position:fixed;top:10px;right:90px;display:flex;gap:8px}.nav-button[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .1);--background-hover: rgba(255, 255, 255, .2);--background-focused: rgba(255, 255, 255, .3);--border-radius: 8px;--padding-start: 2px;--padding-end: 2px;--padding-top: 2px;--padding-bottom: 2px;transition:all .2s ease;outline:none!important;height:19px}.nav-button[_ngcontent-%COMP%]:focus{outline:none;--background: rgba(6, 182, 212, .2)}.nav-button[_ngcontent-%COMP%]:hover{--background: rgba(255, 255, 255, .2);transform:scale(1.05)}.nav-button[_ngcontent-%COMP%]:active{transform:scale(.95)}"]});let i=a;return i})();var Ie=(()=>{let a=class a{constructor(e){this.requestsService=e,this.channels=[],this.currentChannelSubject=new ne(this.channels.find(t=>t.active)||this.channels[0]),this.showOverlaySubject=new ne(!1)}getChannels(){return this.requestsService.get("/channels/access").pipe(oe(e=>{let n=JSON.parse(this.requestsService.decrypt(e.data)).channels,s=n.find(p=>p.authorized);return s&&this.currentChannelSubject.next(s),this.channels=n,n}),re(e=>{let t=JSON.parse(this.requestsService.decrypt(e.error.data));return ie(()=>new Error(t.message||"Failed to fetch channels"))}))}getWeeklyEpg(){return this.requestsService.get("/channels/epg/weekly").pipe(oe(e=>JSON.parse(this.requestsService.decrypt(e.data))),re(e=>{let t=JSON.parse(this.requestsService.decrypt(e.error.data));return ie(()=>new Error(t.message||"Failed to fetch weekly EPG data"))}))}getCurrentChannel(){return this.currentChannelSubject.asObservable()}getShowOverlay(){return this.showOverlaySubject.asObservable()}setCurrentChannel(e){let t=this.channels.find(n=>n.index===e);if(t&&t.authorized)this.channels.forEach(n=>n.active=!1),t.active=!0,this.currentChannelSubject.next(t);else{let n=this.channels.find(s=>s.active);n&&this.currentChannelSubject.next(n)}}nextChannel(){let t=(this.channels.findIndex(s=>s.active)+1)%this.channels.length,n=0;for(;!this.channels[t].authorized&&n<this.channels.length;)t=(t+1)%this.channels.length,n++;this.channels[t].authorized&&this.setCurrentChannel(this.channels[t].index)}previousChannel(){let t=(this.channels.findIndex(s=>s.active)-1+this.channels.length)%this.channels.length,n=0;for(;!this.channels[t].authorized&&n<this.channels.length;)t=(t-1+this.channels.length)%this.channels.length,n++;this.channels[t].authorized&&this.setCurrentChannel(this.channels[t].index)}showOverlay(e){this.showOverlaySubject.next(e)}toggleOverlay(){let e=this.showOverlaySubject.value;this.showOverlay(!e)}};a.\u0275fac=function(t){return new(t||a)(de(ye))},a.\u0275prov=K({token:a,factory:a.\u0275fac,providedIn:"root"});let i=a;return i})();function je(i,a){i&1&&(l(0,"div",18),y(1,"img",19),c())}function Ue(i,a){if(i&1){let o=T();l(0,"div",14),v("click",function(){let t=O(o).$implicit,n=x(2);return k(n.selectChannel(t.index))}),l(1,"div"),y(2,"img",15),c(),l(3,"div"),d(4),c(),l(5,"div"),y(6,"img",16),c(),b(7,je,2,0,"div",17),c()}if(i&2){let o=a.$implicit,e=a.index,t=x(2);L("transform","translateY("+t.getTranslateY(e)+"px)"),M("selectedChannel",o.active)("unauthorized",!o.authorized),r(4),S((e+1).toString().padStart(3,"0")),r(2),m("src",o.logo,J),r(),m("ngIf",!o.authorized)}}function Re(i,a){i&1&&(l(0,"div",30)(1,"ion-list")(2,"ion-item",31)(3,"div",32)(4,"span"),d(5),_(6,"translate"),c()()()()()),i&2&&(r(5),P(" ",C(6,1,"Guide TV not available")," "))}function Ye(i,a){i&1&&(l(0,"span",43),d(1),_(2,"translate"),c()),i&2&&(r(),P(" ",C(2,1,"Now")," "))}function $e(i,a){i&1&&(l(0,"span",44),d(1),_(2,"translate"),c()),i&2&&(r(),P(" ",C(2,1,"Upcoming")," "))}function Ze(i,a){i&1&&(l(0,"span",45),d(1),_(2,"translate"),c()),i&2&&(r(),P(" ",C(2,1,"Next")," "))}function Ge(i,a){i&1&&(l(0,"span",46),d(1),_(2,"translate"),c()),i&2&&(r(),P(" ",C(2,1,"Later")," "))}function Ke(i,a){i&1&&(l(0,"span",47),d(1),_(2,"translate"),c()),i&2&&(r(),P(" ",C(2,1,"live")," "))}function Je(i,a){if(i&1&&(l(0,"ion-item")(1,"div",32),b(2,Ye,3,3,"span",36)(3,$e,3,3,"span",37)(4,Ze,3,3,"span",38)(5,Ge,3,3,"span",39),l(6,"div",40),b(7,Ke,3,3,"span",41),d(8),c(),l(9,"div",42),d(10),c()()()),i&2){let o=a.$implicit,e=a.index,t=x(5);M("current-program",t.isProgramLive(o)&&e===0)("upcoming-program",!t.isProgramLive(o)),r(2),m("ngIf",t.isProgramLive(o)&&e===0),r(),m("ngIf",!t.isProgramLive(o)&&e===0),r(),m("ngIf",e===1),r(),m("ngIf",e===2),r(2),m("ngIf",t.isProgramLive(o)),r(),F(" ",o.start," - ",o.end," "),r(2),P(" ",o.emissionId.label," ")}}function Xe(i,a){if(i&1&&(l(0,"ion-list"),b(1,Je,11,12,"ion-item",35),c()),i&2){let o=x(4);r(),m("ngForOf",o.getUpcomingPrograms(o.currentChannel))}}function et(i,a){if(i&1&&(l(0,"div",33),b(1,Xe,2,1,"ion-list",34),c()),i&2){let o=x(3);r(),m("ngIf",o.selectedChannel==null?null:o.selectedChannel.authorized)}}function tt(i,a){i&1&&(l(0,"span",43),d(1," Maintenant "),c())}function nt(i,a){i&1&&(l(0,"span",44),d(1," \xC0 venir "),c())}function it(i,a){i&1&&(l(0,"span",45),d(1," Suivant "),c())}function ot(i,a){i&1&&(l(0,"span",46),d(1," Plus tard "),c())}function rt(i,a){i&1&&(l(0,"span",47),d(1," live "),c())}function at(i,a){if(i&1&&(l(0,"ion-item")(1,"div",32),b(2,tt,2,0,"span",36)(3,nt,2,0,"span",37)(4,it,2,0,"span",38)(5,ot,2,0,"span",39),l(6,"div",40),b(7,rt,2,0,"span",41),d(8),c(),l(9,"div",42),d(10),c()()()),i&2){let o=a.$implicit,e=a.index,t=x(5);M("current-program",t.isProgramLive(o)&&e===0)("upcoming-program",!t.isProgramLive(o)),r(2),m("ngIf",t.isProgramLive(o)&&e===0),r(),m("ngIf",!t.isProgramLive(o)&&e===0),r(),m("ngIf",e===1),r(),m("ngIf",e===2),r(2),m("ngIf",t.isProgramLive(o)),r(),F(" ",o.start," - ",o.end," "),r(2),P(" ",o.emissionId.label," ")}}function st(i,a){if(i&1&&(l(0,"ion-list"),b(1,at,11,12,"ion-item",35),c()),i&2){let o=x(4);r(),m("ngForOf",o.getUpcomingPrograms(o.currentChannel))}}function lt(i,a){if(i&1&&(l(0,"div",48),b(1,st,2,1,"ion-list",34),c()),i&2){let o=x(3);r(),m("ngIf",o.selectedChannel==null?null:o.selectedChannel.authorized)}}function ct(i,a){if(i&1&&(l(0,"div",49)(1,"div",50),y(2,"div",51),c()()),i&2){let o=x(3);r(2),L("width",o.getProgramProgress(),"%")}}function pt(i,a){i&1&&(l(0,"div",30)(1,"ion-list")(2,"ion-item",31)(3,"div",32)(4,"span"),d(5," Ferm\xE9 maintenant "),c()()()()())}function dt(i,a){if(i&1){let o=T();l(0,"div",20),b(1,Re,7,3,"div",21)(2,et,2,1,"div",22)(3,lt,2,1,"div",23)(4,ct,3,2,"div",24)(5,pt,6,0,"div",21),l(6,"div",25)(7,"ion-button",26),v("click",function(t){O(o);let n=x(2);return k(n.openEgp(t))}),y(8,"img",27),c(),l(9,"ion-button",26),v("click",function(t){O(o);let n=x(2);return k(n.openSettings(t))}),y(10,"img",28),c(),l(11,"ion-button",26),v("click",function(){O(o);let t=x(2);return k(t.openInfo())}),y(12,"img",29),c()()()}if(i&2){let o=x(2);r(),m("ngIf",o.getUpcomingPrograms(o.currentChannel).length===0),r(),m("ngIf",o.getUpcomingPrograms(o.currentChannel).length>0&&o.getProgramProgress()>0),r(),m("ngIf",o.getUpcomingPrograms(o.currentChannel).length>0&&o.getProgramProgress()===0),r(),m("ngIf",(o.selectedChannel==null?null:o.selectedChannel.authorized)&&o.getProgramProgress()>0),r(),m("ngIf",!(o.selectedChannel!=null&&o.selectedChannel.authorized))}}function gt(i,a){if(i&1&&y(0,"div",52),i&2){let o=x(2);M("bg-unauthorized",!(o.selectedChannel!=null&&o.selectedChannel.authorized))}}function ht(i,a){if(i&1&&(l(0,"div",9)(1,"div",10),b(2,Ue,8,9,"div",11),c(),b(3,dt,13,5,"div",12)(4,gt,1,2,"div",13),c()),i&2){let o=x();r(2),m("ngForOf",o.channels),r(),m("ngIf",o.currentChannel),r(),m("ngIf",o.focusedSection==="channels")}}function mt(i,a){i&1&&(l(0,"span",62),d(1,"\u2714"),c())}function ft(i,a){i&1&&(l(0,"span",62),d(1,"\u2714"),c())}function ut(i,a){i&1&&(l(0,"span",62),d(1,"\u2714"),c())}function xt(i,a){i&1&&(l(0,"span",62),d(1,"\u2714"),c())}function _t(i,a){if(i&1){let o=T();l(0,"div",53)(1,"div",54)(2,"div",55)(3,"h2"),d(4),_(5,"translate"),c()(),l(6,"div",56)(7,"ion-button",57),v("click",function(){O(o);let t=x();return k(t.selectQuality("high"))}),b(8,mt,2,0,"span",58),d(9),_(10,"translate"),c(),l(11,"ion-button",57),v("click",function(){O(o);let t=x();return k(t.selectQuality("medium"))}),b(12,ft,2,0,"span",58),d(13),_(14,"translate"),c(),l(15,"ion-button",57),v("click",function(){O(o);let t=x();return k(t.selectQuality("low"))}),b(16,ut,2,0,"span",58),d(17),_(18,"translate"),c(),l(19,"ion-button",57),v("click",function(){O(o);let t=x();return k(t.selectQuality("auto"))}),b(20,xt,2,0,"span",58),d(21),_(22,"translate"),c()(),l(23,"div",59)(24,"ion-button",60),v("click",function(){O(o);let t=x();return k(t.closeQualitySettings())}),y(25,"img",61),c()()()()}if(i&2){let o=x();r(4),S(C(5,17,"Quality")),r(3),M("selected",o.selectedQuality==="high"),r(),m("ngIf",o.selectedQuality==="high"),r(),P(" ",C(10,19,"High quality")," (720p) "),r(2),M("selected",o.selectedQuality==="medium"),r(),m("ngIf",o.selectedQuality==="medium"),r(),P(" ",C(14,21,"Medium quality")," (480p) "),r(2),M("selected",o.selectedQuality==="low"),r(),m("ngIf",o.selectedQuality==="low"),r(),P(" ",C(18,23,"Low quality")," (360p) "),r(2),M("selected",o.selectedQuality==="auto"),r(),m("ngIf",o.selectedQuality==="auto"),r(),P(" ",C(22,25,"Auto quality")," ")}}function bt(i,a){if(i&1&&(l(0,"div",63)(1,"div",64)(2,"span",47),d(3),_(4,"translate"),c(),d(5),c(),l(6,"h1",65),d(7),c(),l(8,"p",66),d(9),c(),l(10,"h3",67),d(11),l(12,"span",68),d(13),c()(),l(14,"p",66),d(15),c()()),i&2){let o=a.$implicit,e=x();r(3),P(" ",C(4,8,"live")," "),r(2),F(" ",o.start," - ",o.end," "),r(2),S(e.selectedChannel==null?null:e.selectedChannel.name),r(2),S(e.selectedChannel==null||e.selectedChannel.channelCategoryId==null?null:e.selectedChannel.channelCategoryId.name),r(2),P("",o.emissionId.label," "),r(2),P("(",o.emissionId.duree," min)"),r(2),S(o.emissionId.description)}}function vt(i,a){if(i&1&&(l(0,"div",63)(1,"div",69),d(2),_(3,"date"),_(4,"date"),c(),l(5,"h1",70),d(6),_(7,"translate"),c()()),i&2){let o=x();r(2),F(" ",ae(3,3,o.getCurrentDate(),"HH:mm")," - ",ae(4,6,o.getCurrentDate(),"HH:mm")," "),r(4),S(C(7,9,"No program available"))}}function Ct(i,a){if(i&1){let o=T();l(0,"div",71)(1,"ion-button",72),v("click",function(){O(o);let t=x();return k(t.closeProgramInfo())}),y(2,"img",73),c()()}}function Pt(i,a){if(i&1){let o=T();l(0,"app-epg",74),v("close",function(){O(o);let t=x();return k(t.closeEpg())}),c()}if(i&2){let o=x();m("channels",o.channels)("weeklyEpgData",o.weeklyEpgData)}}var cn=(()=>{let a=class a{constructor(e,t,n,s,p,h,g){this.channelService=e,this.navController=t,this.cdr=n,this.ngZone=s,this.route=p,this.authService=h,this.storageService=g,this.selectedChannelId="",this.userToken="",this.isListening=!1,this.playerLoaded=!1,this.channels=[],this.currentChannel=null,this.showOverlay=!0,this.isVideoLoading=!0,this.showLogo=!1,this.cachedProgress=0,this.lastProgressUpdate=0,this.PROGRESS_UPDATE_INTERVAL=1e3,this.focusedSection="channels",this.focusedChannelIndex=0,this.focusedProgramIndex=0,this.channelItems=[],this.programButtons=[],this.overlayTimer=null,this.OVERLAY_TIMEOUT=1e4,this.showQualitySettings=!1,this.selectedQuality="auto",this.focusedQualityIndex=0,this.qualityButtons=[],this.showProgramInfo=!1,this.focusedProgramInfoIndex=0,this.programInfoButtons=[],this.showEpg=!1,this.isLoadingEpg=!1,this.weeklyEpgData=null,this.epgRequested=!1,this.route.queryParams.subscribe(f=>{this.selectedChannelId=f.channelId,this.userToken=f.userToken})}ngOnDestroy(){this.selectedChannelId="",this.userToken=""}ionViewDidEnter(){return G(this,null,function*(){this.isListening=!0,this.userToken&&(this.authService.login(this.userToken),this.authService.activeUser.subscribe(e=>{console.log("\u{1F680} ~ LiveTvPage ~ ionViewDidEnter ~ user:",e)})),this.selectedChannelId||(this.selectedChannelId=""),console.log("\u{1F680} ~ LiveTvPage ~ ionViewDidEnter ~ this.userToken:",this.userToken),console.log("\u{1F680} ~ LiveTvPage ~ ionViewDidEnter ~ this.selectedChannelId :",this.selectedChannelId),this.loadChannels(),this.channelService.getCurrentChannel().subscribe(e=>{this.currentChannel=e,this.player&&e&&this.loadChannel(e)}),this.channelService.getShowOverlay().subscribe(e=>{this.showOverlay=e,e?(this.startOverlayTimer(),setTimeout(()=>{this.channelItems=Array.from(document.querySelectorAll(".channel-list ion-item")),this.programButtons=Array.from(document.querySelectorAll(".program-button")),this.focusedSection="channels";let t=this.channelItems.findIndex(n=>n.classList.contains("selectedChannel"));this.focusedChannelIndex=t>=0?t:0,this.focusedProgramIndex=0,this.updateFocus()},100)):(this.clearOverlayTimer(),this.channelItems=[],this.programButtons=[])}),this.startProgressUpdates(),this.showOverlay=!0,setTimeout(()=>{this.showOverlay=!1,this.onShowLogo(),this.cdr.detectChanges()},5e3)})}ionViewDidLeave(){this.resetVar()}resetVar(){this.isListening=!1,this.backButtonSub&&this.backButtonSub.unsubscribe(),this.player&&(this.player.destroy(),this.player=null),this.stopProgressUpdates(),this.clearOverlayTimer(),this.playerLoaded=!1,this.currentChannel=null,this.showOverlay=!1,this.isVideoLoading=!0,this.showLogo=!1,this.focusedSection="channels",this.focusedChannelIndex=0,this.focusedProgramIndex=0,this.channelItems=[],this.programButtons=[],this.selectedChannelId="";let e=document;(e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement)&&(e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.msExitFullscreen&&e.msExitFullscreen()),this.showOverlay=!1}startProgressUpdates(){this.progressUpdateInterval=setInterval(()=>{this.cdr.detectChanges()},3e4)}stopProgressUpdates(){this.progressUpdateInterval&&(clearInterval(this.progressUpdateInterval),this.progressUpdateInterval=null)}loadChannels(){this.channelService.getChannels().subscribe({next:e=>{for(let t=0;t<e.length;t++){let n=e[t];n.index=t+1}if(this.channels=e,console.log("\u{1F680} ~ LiveTvPage ~ loadChannels ~ this.channels:",this.channels),this.selectedChannelId){let t=this.channels.find(n=>n._id===this.selectedChannelId);t&&(t.active=!0,this.channelService.setCurrentChannel(t.index))}else if(this.currentChannel){let t=this.channels.find(n=>n.index===this.currentChannel.index);t&&(t.active=!0)}this.initializePlayer()},error:e=>{console.error("Error loading channels:",e)}})}loadWeeklyEpgData(){this.isLoadingEpg=!0,this.channelService.getWeeklyEpg().subscribe({next:e=>{this.weeklyEpgData=e,this.isLoadingEpg=!1,this.epgRequested&&!this.showEpg&&(this.showEpg=!0,setTimeout(()=>{this.focusEpgComponent()},100))},error:e=>{console.error("Error loading weekly EPG data:",e),this.isLoadingEpg=!1,this.weeklyEpgData=null,this.epgRequested&&!this.showEpg&&(this.showEpg=!0,setTimeout(()=>{this.focusEpgComponent()},100))}})}startOverlayTimer(){this.clearOverlayTimer(),this.overlayTimer=setTimeout(()=>{this.channelService.showOverlay(!1),this.onShowLogo()},this.OVERLAY_TIMEOUT)}clearOverlayTimer(){this.overlayTimer&&(clearTimeout(this.overlayTimer),this.overlayTimer=null)}resetOverlayTimer(){this.showOverlay&&this.startOverlayTimer()}initializePlayer(){return G(this,null,function*(){if(this.isVideoLoading=!0,!shaka.Player.isBrowserSupported()){console.error("Browser not supported!");return}let e=document.getElementById("video"),t=document.getElementById("video-container");t&&(t.style.width="100vw",t.style.height="100vh",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.zIndex="1000",t.style.backgroundColor="#000"),e&&(e.style.width="100%",e.style.height="100%",e.style.objectFit="cover"),e.addEventListener("loadstart",()=>{this.ngZone.run(()=>{this.isVideoLoading=!0,this.cdr.detectChanges()})}),e.addEventListener("play",()=>{this.ngZone.run(()=>{this.isVideoLoading=!1,this.cdr.detectChanges()})}),e.addEventListener("waiting",()=>{this.ngZone.run(()=>{this.isVideoLoading=!0,this.cdr.detectChanges()})}),e.addEventListener("stalled",()=>{this.ngZone.run(()=>{this.isVideoLoading=!0,this.cdr.detectChanges()})}),e.addEventListener("error",()=>{this.ngZone.run(()=>{this.isVideoLoading=!0,this.cdr.detectChanges()})}),e.addEventListener("timeupdate",()=>{this.ngZone.run(()=>{e.currentTime>0&&(this.isVideoLoading=!1,this.cdr.detectChanges())})});let n=new shaka.ui.Overlay(new shaka.Player(e),t,e),s=n.getControls();this.player=s.getPlayer(),n.configure({addBigPlayButton:!1,addSeekBar:!1,controlPanelElements:["mute","volume-slider","current-time","time-remaining","fullscreen","rewind","play-pause","fast-forward","skip-back","skip-forward","quality","pip"]}),this.applyQualityConfiguration(this.selectedQuality);try{if(this.currentChannel)this.currentChannel.active=!0,yield this.loadChannel(this.currentChannel);else{let p=this.channels[0];p?(p.active=!0,this.channelService.setCurrentChannel(p.index)):yield this.player.load("https://ireplay.tv/test/blender.m3u8")}this.playerLoaded=!0,e&&(yield e.play()),this.requestFullScreen(e,t)}catch(p){console.error("Error loading video",p)}})}requestFullScreen(e,t){setTimeout(()=>{try{e.requestFullscreen&&e.requestFullscreen()}catch(n){console.error("Fullscreen request failed:",n)}},1e3)}toggleFullScreen(e,t){try{let n=document;!n.fullscreenElement&&!n.mozFullScreenElement&&!n.webkitFullscreenElement&&!n.msFullscreenElement?this.requestFullScreen(e,t):n.exitFullscreen&&n.exitFullscreen()}catch(n){console.error("Fullscreen toggle failed:",n)}}loadChannel(e){return G(this,null,function*(){try{this.isVideoLoading=!0,this.cdr.detectChanges(),yield this.player.load(e.url);let t=document.getElementById("video");t&&(yield t.play())}catch(t){console.error("Error loading channel",t)}})}onShowLogo(){this.showLogo=!0,setTimeout(()=>{this.showLogo=!1},5e3)}selectChannel(e){let t=this.channels.find(n=>n.index===e);t&&(this.channels.forEach(n=>n.active=!1),t.active=!0,t.authorized&&(e===this.currentChannel.index&&(this.channelService.showOverlay(!1),this.onShowLogo()),this.channelService.setCurrentChannel(e)))}selectChannelWhileMoving(e){let t=this.channels.find(n=>n.index===e);t&&(this.channels.forEach(n=>n.active=!1),t.active=!0,t.authorized&&this.channelService.setCurrentChannel(e))}getTranslateY(e){let n=this.channels.length,s=Math.min(6,Math.floor(n*1.5)),g=window.innerHeight/2-90/2+116,f=this.channels.find(u=>u.active);if(f&&n>0){let I=f.index-1-e;g-=I*90;let w=3;I>w?g+=n*90:I<-w&&(g-=n*90)}return f.index-1>3&&f.index-1-e===4&&(g=g-n*90),g}get selectedChannel(){return this.channels.find(t=>t.active)||this.currentChannel}handleKeyboardEvent(e){if(console.log("Live tv --- handleKeyboardEvent : ",e.key),!!this.isListening){if(this.resetOverlayTimer(),this.showEpg){(e.key==="Escape"||e.key==="Back"||e.key==="backButton"||e.key==="Backspace")&&this.closeEpg();return}if(this.showQualitySettings){this.handleQualitySettingsNavigation(e);return}if(this.showProgramInfo){this.handleProgramInfoNavigation(e);return}if(this.showOverlay)switch(e.key){case"ArrowUp":if(this.focusedSection==="channels")if(this.selectedChannel.index===1){this.focusedChannelIndex=this.channelItems.length-1;let t=this.channels.length;this.selectChannelWhileMoving(t)}else{this.focusedChannelIndex=Math.max(0,this.focusedChannelIndex-1);let t=this.selectedChannel,n=Math.max(1,t.index-1);this.selectChannelWhileMoving(n)}break;case"ArrowDown":if(this.focusedSection==="channels")if(this.selectedChannel.index===this.channels.length)this.focusedChannelIndex=0,this.selectChannelWhileMoving(1);else{this.focusedChannelIndex=Math.min(this.channelItems.length-1,this.focusedChannelIndex+1);let t=this.selectedChannel,n=Math.min(this.channels.length,t.index+1);this.selectChannelWhileMoving(n)}this.updateFocus(),e.preventDefault();break;case"Enter":case"Select":if(this.focusedSection==="programs"&&this.programButtons.length>0)this.programButtons[this.focusedProgramIndex].click();else{let t=this.channels.find(n=>n.active);t&&t.authorized&&(this.channelService.showOverlay(!1),this.onShowLogo())}e.preventDefault();break;case"ArrowLeft":this.focusedSection==="programs"&&(this.focusedProgramIndex>0?this.focusedProgramIndex--:this.focusedSection="channels"),this.updateFocus(),e.preventDefault();break;case"ArrowRight":this.focusedSection==="channels"?this.programButtons.length>0&&(this.focusedSection="programs"):this.focusedProgramIndex<this.programButtons.length-1?this.focusedProgramIndex++:this.focusedSection="channels",this.updateFocus(),e.preventDefault();break;case"Escape":case"Back":case"backButton":case"Backspace":console.log("\u{1F680} ~ LiveTvPage ~ handleKeyboardEvent ~ Back button pressed"),this.onReturn(),e.preventDefault();break}else switch(e.key){case"ArrowUp":let t=this.selectedChannel,n=t.index-1;n<1&&(n=this.channels.length);let s=this.channels.find(q=>q.index===n),p=n,h=!1;for(;!h&&p!==t.index;){if(s=this.channels.find(q=>q.index===p),s&&s.authorized){h=!0;break}p--,p<1&&(p=this.channels.length)}h&&s&&s.index!==t.index&&this.selectChannel(s.index),this.channelService.showOverlay(!0);break;case"ArrowDown":let g=this.selectedChannel,f=g.index+1;f>this.channels.length&&(f=1);let u=this.channels.find(q=>q.index===f),I=f,w=!1;for(;!w&&I!==g.index;){if(u=this.channels.find(q=>q.index===I),u&&u.authorized){w=!0;break}I++,I>this.channels.length&&(I=1)}w&&u&&u.index!==g.index&&this.selectChannel(u.index),this.channelService.showOverlay(!0);break;case"Enter":case"Select":this.channelService.showOverlay(!0),e.preventDefault();break;case"f":case"F":let $=document.getElementById("video"),Ee=document.getElementById("video-container");this.toggleFullScreen($,Ee),e.preventDefault();break;case"g":case"G":this.showEpg=!0,e.preventDefault();break}switch(e.key){case"Escape":case"Back":case"backButton":case"Backspace":this.showQualitySettings||this.showProgramInfo?(this.showQualitySettings=!1,this.showProgramInfo=!1):this.showEpg?this.showEpg=!1:(this.resetVar(),this.navController.navigateBack("/home"));break}}}onReturn(){this.showQualitySettings||this.showProgramInfo?(this.showQualitySettings=!1,this.showProgramInfo=!1):this.showEpg?this.showEpg=!1:(this.resetVar(),this.navController.navigateForward("/home"))}updateFocus(){this.channelItems.forEach(e=>e.classList.remove("tv-focus")),this.programButtons.forEach(e=>e.classList.remove("tv-focus")),this.focusedSection==="channels"&&this.channelItems.length>0?(this.channelItems[this.focusedChannelIndex].classList.add("tv-focus"),this.channelItems[this.focusedChannelIndex].scrollIntoView({behavior:"smooth",block:"center"})):this.focusedSection==="programs"&&this.programButtons.length>0&&(this.programButtons[this.focusedProgramIndex].classList.add("tv-focus"),this.programButtons[this.focusedProgramIndex].scrollIntoView({behavior:"smooth",block:"center"}))}getCurrentProgram(e){if(!e||!e.programmeDetails||e.programmeDetails.length===0)return null;let t=new Date;return e.programmeDetails.find(n=>{let s=new Date().toISOString().split("T")[0],p=new Date(`${s}T${n.start}:00`),h=new Date(`${s}T${n.end}:00`);return t>=p&&t<h})||null}isProgramLive(e){let t=new Date,n=t.getHours().toString().padStart(2,"0")+":"+t.getMinutes().toString().padStart(2,"0");return e.start<=n&&e.end>n}getUpcomingPrograms(e){var s;if(!((s=e==null?void 0:e.programmeDetails)!=null&&s.length))return[];let t=new Date,n=t.getHours().toString().padStart(2,"0")+":"+t.getMinutes().toString().padStart(2,"0");return e.programmeDetails.filter(p=>p.end>=n).sort((p,h)=>p.start.localeCompare(h.start)).slice(0,3)}openEgp(e){let t=e.target.closest("ion-button");t.classList.add("button-clicked"),setTimeout(()=>{t.classList.remove("button-clicked")},500),this.epgRequested=!0,!this.weeklyEpgData&&!this.isLoadingEpg&&this.loadWeeklyEpgData(),this.weeklyEpgData&&(this.showEpg=!0,setTimeout(()=>{this.focusEpgComponent()},100))}openSettings(e){this.showQualitySettings=!0,setTimeout(()=>{this.updateQualitySettingsFocus()},100)}selectQuality(e){this.selectedQuality=e,this.showQualitySettings=!1,this.applyQualityConfiguration(e)}applyQualityConfiguration(e){if(this.player)try{switch(this.player.configure({abr:{enabled:!0},restrictions:{maxHeight:Number.POSITIVE_INFINITY,maxWidth:Number.POSITIVE_INFINITY,maxBandwidth:Number.POSITIVE_INFINITY,minHeight:0,minWidth:0,minBandwidth:0}}),e){case"fullhd":this.player.configure({abr:{enabled:!1},restrictions:{maxHeight:1080,maxWidth:1920,minHeight:720,minWidth:1280,maxBandwidth:Number.POSITIVE_INFINITY,minBandwidth:0}});break;case"high":this.player.configure({abr:{enabled:!1},restrictions:{maxHeight:720,maxWidth:1280,minHeight:480,minWidth:854,maxBandwidth:Number.POSITIVE_INFINITY,minBandwidth:0}});break;case"medium":this.player.configure({abr:{enabled:!1},restrictions:{maxHeight:480,maxWidth:854,minHeight:360,minWidth:640,maxBandwidth:Number.POSITIVE_INFINITY,minBandwidth:0}});break;case"low":this.player.configure({abr:{enabled:!1},restrictions:{maxHeight:360,maxWidth:640,minHeight:0,minWidth:0,maxBandwidth:Number.POSITIVE_INFINITY,minBandwidth:0}});break;case"auto":default:this.player.configure({abr:{enabled:!0},restrictions:{maxHeight:Number.POSITIVE_INFINITY,maxWidth:Number.POSITIVE_INFINITY,minHeight:0,minWidth:0,maxBandwidth:Number.POSITIVE_INFINITY,minBandwidth:0}});break}}catch(t){console.error("Error setting quality:",t)}}closeQualitySettings(){this.showQualitySettings=!1}handleQualitySettingsNavigation(e){console.log("handleQualitySettingsNavigation : ",e.key);let t=["high","medium","low","auto"],n=t.length+1;switch(e.key){case"ArrowUp":this.focusedQualityIndex=this.focusedQualityIndex>0?this.focusedQualityIndex-1:n-1,this.updateQualitySettingsFocus(),e.preventDefault();break;case"ArrowDown":this.focusedQualityIndex=this.focusedQualityIndex<n-1?this.focusedQualityIndex+1:0,this.updateQualitySettingsFocus(),e.preventDefault();break;case"Enter":case"Select":this.focusedQualityIndex<t.length?this.selectQuality(t[this.focusedQualityIndex]):this.closeQualitySettings(),e.preventDefault();break;case"Escape":case"Back":case"backButton":case"Backspace":this.closeQualitySettings(),e.preventDefault();break}}updateQualitySettingsFocus(){document.querySelectorAll(".quality-button, .quality-settings-footer .back-button").forEach(s=>{s.classList.remove("focused")});let t=document.querySelectorAll(".quality-button"),n=document.querySelector(".quality-settings-footer .back-button");this.focusedQualityIndex<t.length?t[this.focusedQualityIndex].classList.add("focused"):n&&n.classList.add("focused")}getProgramProgress(){let e=Date.now();if(e-this.lastProgressUpdate<this.PROGRESS_UPDATE_INTERVAL)return this.cachedProgress;if(!this.currentChannel)return this.cachedProgress=0,this.lastProgressUpdate=e,0;let t=this.getCurrentProgram(this.currentChannel);if(!t||!t.start||!t.end)return this.cachedProgress=0,this.lastProgressUpdate=e,0;let n=new Date(e),s=n.toISOString().split("T")[0],p=new Date(`${s}T${t.start}:00`),h=new Date(`${s}T${t.end}:00`);if(h<=p&&h.setDate(h.getDate()+1),n<p)this.cachedProgress=0;else if(n>h)this.cachedProgress=100;else{let g=h.getTime()-p.getTime(),u=(n.getTime()-p.getTime())/g*100;this.cachedProgress=Math.max(0,Math.min(100,u))}return this.lastProgressUpdate=e,this.cachedProgress}openInfo(){this.showProgramInfo=!this.showProgramInfo,this.showProgramInfo&&(this.focusedProgramInfoIndex=0,setTimeout(()=>{this.updateProgramInfoFocus()},100))}closeProgramInfo(){this.showProgramInfo=!1,this.focusedProgramInfoIndex=0}handleProgramInfoNavigation(e){switch(e.key){case"ArrowUp":this.focusedProgramInfoIndex=this.focusedProgramInfoIndex>0?this.focusedProgramInfoIndex-1:0,this.updateProgramInfoFocus(),e.preventDefault();break;case"ArrowDown":this.focusedProgramInfoIndex=this.focusedProgramInfoIndex<0?this.focusedProgramInfoIndex+1:0,this.updateProgramInfoFocus(),e.preventDefault();break;case"Enter":case"Select":this.closeProgramInfo(),e.preventDefault();break;case"Escape":case"Back":case"backButton":case"Backspace":this.closeProgramInfo(),e.preventDefault();break}}updateProgramInfoFocus(){document.querySelectorAll(".program-info-panel .close-button, .program-info-panel .back-button--program-info").forEach(n=>{n.classList.remove("focused")});let t=document.querySelector(".program-info-panel .back-button--program-info");t&&this.focusedProgramInfoIndex===0&&t.classList.add("focused")}getCurrentProgramInfo(){return this.selectedChannel?this.getCurrentProgram(this.selectedChannel):null}getCurrentDate(){return new Date}closeEpg(){this.showEpg=!1,this.epgRequested=!1}focusEpgComponent(){let e=document.querySelector("app-epg");if(e){let t=e.querySelector('.epg-navigation-controls ion-button[tabindex="0"]');t?t.focus():e.focus()}}};a.\u0275fac=function(t){return new(t||a)(E(Ie),E(_e),E(me),E(ge),E(ue),E(we),E(Pe))},a.\u0275cmp=D({type:a,selectors:[["app-live-tv"]],hostBindings:function(t,n){t&1&&v("keydown",function(p){return n.handleKeyboardEvent(p)},!1,he)},decls:10,vars:11,consts:[["dir","ltr",3,"fullscreen"],["id","video-container",1,"fullscreen-container"],["class","overlay-container",4,"ngIf"],["class","quality-settings-overlay",4,"ngIf"],[1,"program-info-panel"],["class","program-info-header",4,"ngIf"],["class","program-info-footer",4,"ngIf"],[1,"program-info-backdrop",3,"click"],[3,"channels","weeklyEpgData","close",4,"ngIf"],[1,"overlay-container"],[1,"channel-list"],["class","channel-scroll",3,"transform","selectedChannel","unauthorized","click",4,"ngFor","ngForOf"],["class","program-guide",4,"ngIf"],["class","background-active",3,"bg-unauthorized",4,"ngIf"],[1,"channel-scroll",3,"click"],["src","/assets/icon/left-arrow.png","alt","",2,"height","20px"],[2,"width","80px","height","60px","object-fit","contain","transition","all 0.3s ease",3,"src"],["style","position: fixed;right: 52px;top: 47%;z-index: 223232;transform: translateY(-50%);",4,"ngIf"],[2,"position","fixed","right","52px","top","47%","z-index","223232","transform","translateY(-50%)"],["src","/assets/icon/lock-icon.png","alt","",2,"height","60px","object-fit","contain","width","auto","border-radius","50%"],[1,"program-guide"],["class","program-scroll","style","margin-bottom: 46px;height: 90px;",4,"ngIf"],["class","program-scroll",4,"ngIf"],["class","program-scroll","style","margin-bottom: 24px;padding-bottom: 20px;",4,"ngIf"],["class","program-progress",4,"ngIf"],[1,"program-buttons-container"],["size","small",1,"program-button",3,"click"],["src","/assets/img/epg.png","alt","EPG"],["src","/assets/img/settings.png","alt","Settings"],["src","/assets/img/dots.png","alt","More"],[1,"program-scroll",2,"margin-bottom","46px","height","90px"],[2,"min-height","90px","margin","0","display","flex","align-items","center","font-weight","600","letter-spacing","1px","font-size","larger"],[1,"program-item"],[1,"program-scroll"],[4,"ngIf"],[3,"current-program","upcoming-program",4,"ngFor","ngForOf"],["class","program-status status-now",4,"ngIf"],["class","program-status status-upcoming",4,"ngIf"],["class","program-status status-next",4,"ngIf"],["class","program-status status-later",4,"ngIf"],[1,"program-time",2,"margin-bottom","4px"],["class","live-indicator",4,"ngIf"],[1,"program-title",2,"margin-bottom","0"],[1,"program-status","status-now"],[1,"program-status","status-upcoming"],[1,"program-status","status-next"],[1,"program-status","status-later"],[1,"live-indicator"],[1,"program-scroll",2,"margin-bottom","24px","padding-bottom","20px"],[1,"program-progress"],[1,"progress-bar-container"],[1,"progress-bar"],[1,"background-active"],[1,"quality-settings-overlay"],[1,"quality-settings-container"],[1,"quality-settings-header"],[1,"quality-options"],[1,"quality-button",3,"click"],["style","margin-right: 6px;",4,"ngIf"],[1,"quality-settings-footer"],[1,"back-button","back-button--program-info",3,"click"],["src","../../assets/icon/back-settings.png","alt","",2,"height","20px"],[2,"margin-right","6px"],[1,"program-info-header"],[1,"program-time",2,"margin-bottom","10px"],[2,"margin","0px 0 20px"],[2,"margin","10px 0"],[2,"margin","15px 0"],[2,"font-size","12px"],[1,"program-time"],[2,"margin","0px 0 30px"],[1,"program-info-footer"],[1,"back-button","back-button--info",3,"click"],["src","../../assets/icon/back-settings.png","alt","Back",2,"height","20px"],[3,"close","channels","weeklyEpgData"]],template:function(t,n){t&1&&(l(0,"ion-content",0)(1,"div",1),b(2,ht,5,3,"div",2)(3,_t,26,27,"div",3),c(),l(4,"div",4),b(5,bt,16,10,"div",5)(6,vt,8,11,"div",5)(7,Ct,3,0,"div",6),c(),l(8,"div",7),v("click",function(){return n.closeProgramInfo()}),c(),b(9,Pt,1,2,"app-epg",8),c()),t&2&&(m("fullscreen",!0),r(2),m("ngIf",n.channels.length>0),r(),m("ngIf",n.showQualitySettings),r(),M("show",n.showProgramInfo),r(),m("ngIf",n.getCurrentProgramInfo()),r(),m("ngIf",!n.getCurrentProgramInfo()),r(),m("ngIf",n.showProgramInfo),r(),M("show",n.showProgramInfo),r(),m("ngIf",n.showEpg))},dependencies:[B,Y,be,ve,Ce,z,U,R,fe,xe,Se,N,V],styles:['@charset "UTF-8";*[_ngcontent-%COMP%]{font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;outline:none}.fullscreen[_ngcontent-%COMP%]{top:0;left:0;bottom:0;right:0;background-color:transparent!important;position:fixed;width:100%;height:100%;z-index:99999}.overlay-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:100010;background:transparent}.channel-list[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:250px;height:100%;-webkit-backdrop-filter:none;color:#fff;pointer-events:auto;padding-top:0}.channel-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.channel-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff0d}.channel-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#09f,#0c9);border-radius:4px}.channel-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(180deg,#08f,#00b894)}.channel-list[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{position:absolute;top:16px;left:16px;z-index:1000;--color: #fff;--background: transparent;--background-hover: rgba(255, 255, 255, .1);--background-activated: rgba(255, 255, 255, .2);font-size:24px}.channel-list[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding-top:0;position:relative;overflow:visible;height:100%}.channel-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{position:absolute;height:100px;width:100%}.channel-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:hover{z-index:10}.channel-list[_ngcontent-%COMP%]   .channel-scroll[_ngcontent-%COMP%]{position:absolute;height:90px;right:0;left:0;padding:0 0 0 16px}.quality-settings-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000e6;z-index:100020;display:flex;align-items:center;justify-content:center}.quality-settings-container[_ngcontent-%COMP%]{background-color:#1a1a1a;border-radius:12px;padding:40px;max-width:500px;width:90%;text-align:center;box-shadow:0 8px 32px #00000080}.quality-settings-header[_ngcontent-%COMP%]{margin-bottom:30px}.quality-settings-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:28px;font-weight:600;margin:0;text-transform:uppercase;letter-spacing:1px}.quality-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:30px}.quality-button[_ngcontent-%COMP%]{--background: #2a2a2a;--background-hover: #3a3a3a;--background-activated: #4a4a4a;--color: #ffffff;padding:16px;font-size:16px;font-weight:500;text-transform:none;border-bottom:2px solid rgba(255,255,255,.0901960784)}.quality-button.selected[_ngcontent-%COMP%]{--background: #007bff;--background-hover: #0056b3;--background-activated: #004085;font-weight:600}.quality-button.focused[_ngcontent-%COMP%]{background:#272727}.quality-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #007bff4d}.quality-settings-footer[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{border-radius:12px;padding:6px 6px 2px;font-size:16px;font-weight:500;text-transform:none;transition:all .3s ease;border:2px solid transparent}.quality-settings-footer[_ngcontent-%COMP%]   .back-button.focused[_ngcontent-%COMP%]{background:#fff}.quality-settings-footer[_ngcontent-%COMP%]   .back-button.focused[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:invert(1)}.quality-settings-footer[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover{--background: #fff;transform:translateY(-2px)}.quality-settings-footer[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{filter:invert(1)}.program-guide[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;width:calc(100% - 250px);max-height:50%;color:#fff;pointer-events:auto;overflow:hidden}.program-scroll[_ngcontent-%COMP%]{display:flex;overflow:hidden;height:calc(100% - 80px);align-items:stretch;margin-bottom:-2px}.program-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.program-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff1a;border-radius:3px}.program-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(90deg,#09f,#0c9);border-radius:3px}.program-scroll[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;justify-content:flex-start;background:none;padding:0}.background-active[_ngcontent-%COMP%]{background:linear-gradient(107deg,#069 -26.28%,#006699f0 -17.29%,#00d4ff0a 32.19%);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);width:100%;height:90px;position:fixed;left:0;bottom:110px;z-index:-1}.bg-unauthorized[_ngcontent-%COMP%]{background:linear-gradient(107deg,#e41932 -26.28%,#e41932 -17.29%,#e4193200 32.19%)}.program-item[_ngcontent-%COMP%]{display:flex;min-width:200px;width:100%;flex-direction:column;gap:6px;align-items:flex-start;justify-content:space-between;text-align:left;position:relative;overflow:hidden}.program-item[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#09f,#0c9);opacity:0}.program-item.current-program[_ngcontent-%COMP%]{background:linear-gradient(145deg,#0099ff26,#00cc991a);border-color:#09f6}.program-item.current-program[_ngcontent-%COMP%]:before{opacity:1}.program-item.upcoming-program[_ngcontent-%COMP%]{background:linear-gradient(145deg,#ffffff0f,#ffffff05)}ion-item[_ngcontent-%COMP%]{flex-grow:1;--background: transparent !important;color:#fff;outline:none;--padding-start: 0;--inner-border-width: 0px;--border-color: transparent;max-width:360px;border-right:1px solid #00D4FF;padding:0 14px;margin:8px 0}ion-item[_ngcontent-%COMP%]:last-child   .program-item[_ngcontent-%COMP%]{border-right:none}ion-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;width:40px;height:40px}ion-item[_ngcontent-%COMP%]:last-child{border-right:none}.channel-scroll[_ngcontent-%COMP%]{--background: transparent;color:#fff;display:flex;align-items:center;gap:16px;padding:18px 20px;outline:none;border-bottom:1px solid rgba(255,255,255,.05);position:relative;cursor:pointer;justify-content:flex-start;opacity:.5}.channel-scroll.unauthorized[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child   img[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px)}.channel-scroll[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;bottom:0;width:0;background:linear-gradient(135deg,#09f3,#00cc9926);transition:width .3s ease}.channel-scroll[_ngcontent-%COMP%]:active{transform:translate(4px) scale(.98);background:linear-gradient(135deg,#0099ff40,#0c93)}.channel-scroll[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){font-weight:400;font-size:16px;color:#fff;min-width:30px;text-align:center}.channel-scroll[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){font-weight:500;font-size:15px;flex-grow:1;color:#fff;text-shadow:0 1px 3px rgba(0,0,0,.5);transition:all .3s ease;text-align:center}.channel-scroll[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child   img[_ngcontent-%COMP%]{width:100px;height:80px;object-fit:contain;transition:all .3s ease}.selectedChannel[_ngcontent-%COMP%]{position:relative;border-left:none!important;background:none;--background: transparent !important;--border-color: transparent;--inner-border-width: 0;opacity:1}.selectedChannel[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-8px;width:5px;height:100%;background:linear-gradient(180deg,#09f,#0c9);border-radius:0 3px 3px 0;box-shadow:0 0 15px #09f9}.selectedChannel[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(90deg,rgba(0,153,255,.1),transparent 50%);pointer-events:none}.selectedChannel[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(3){color:#fff!important;font-weight:600!important;text-shadow:0 1px 3px rgba(0,0,0,.7)}.back-button[_ngcontent-%COMP%]{position:fixed;top:60px;left:-80px;z-index:100009100009100020;background:transparent}.back-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:12px;background:transparent;-webkit-backdrop-filter:blur(20px);border:none;cursor:pointer;filter:brightness(1.1) drop-shadow(0 2px 4px rgba(0,0,0,.3));gap:8px}.back-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;height:16px;filter:brightness(1.1) drop-shadow(0 2px 4px rgba(0,0,0,.3))}.burger-button[_ngcontent-%COMP%]{position:fixed;bottom:30px;left:20px;z-index:100009}.burger-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:55px;height:55px;background:linear-gradient(145deg,#0099ffe6,#0c9c);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.2);border-radius:18px;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 10px 35px #09f6,0 4px 15px #00cc994d,inset 0 1px #fff3;position:relative;overflow:hidden;animation:_ngcontent-%COMP%_burger-pulse 3s ease-in-out infinite}.burger-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(45deg,rgba(255,255,255,.1),transparent 50%,rgba(255,255,255,.1));opacity:0;transition:opacity .3s ease}.burger-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:50%;width:0;height:0;background:radial-gradient(circle,rgba(255,255,255,.3),transparent 70%);border-radius:50%;transform:translate(-50%,-50%);transition:all .3s ease}.burger-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-3px) scale(1.08);background:linear-gradient(145deg,#08f,#00b894e6);border-color:#ffffff4d;box-shadow:0 15px 50px #09f9,0 6px 25px #0c96,inset 0 1px #ffffff4d}.burger-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:before{opacity:1}.burger-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:after{width:100%;height:100%}.burger-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.15) rotate(90deg);filter:brightness(1.4) drop-shadow(0 0 12px rgba(255,255,255,.8))}.burger-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(-1px) scale(1.05);box-shadow:0 8px 30px #0099ff80,0 3px 15px #00cc994d,inset 0 1px #fff3}.burger-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:26px;height:26px;object-fit:contain;filter:brightness(1.2) drop-shadow(0 2px 6px rgba(0,0,0,.4));transition:all .4s cubic-bezier(.4,0,.2,1)}.back-button--program-info[_ngcontent-%COMP%]{position:fixed;top:60px;right:100px;left:unset;z-index:100009100009100020;background:transparent}.channel-logo[_ngcontent-%COMP%]{position:fixed;top:24px;right:60px;z-index:1321223132131}.channel-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px;width:auto;object-fit:contain}ion-thumbnail[_ngcontent-%COMP%]{display:flex;align-items:center}.channel-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#000000d9,#14141ee6);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);z-index:999999;animation:_ngcontent-%COMP%_fadeIn .3s cubic-bezier(.4,0,.2,1)}.channel-logo-card[_ngcontent-%COMP%]{position:fixed;top:30px;right:30px;z-index:132122313213113210000000000000000000000;background:linear-gradient(145deg,#ffffff1f,#ffffff0d);border-radius:20px;box-shadow:0 20px 60px #0009,0 8px 32px #0099ff26,inset 0 1px #fff3;-webkit-backdrop-filter:blur(25px);backdrop-filter:blur(25px);border:1px solid #231e1f;overflow:hidden;width:320px;transition:all .4s cubic-bezier(.4,0,.2,1);animation:_ngcontent-%COMP%_slideInFromRight .5s cubic-bezier(.4,0,.2,1)}.channel-logo-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#09f,#0c9,#ff6b6b);opacity:.8}.channel-logo-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px) scale(1.02);box-shadow:0 25px 80px #000000b3,0 12px 40px #0099ff40,inset 0 1px #ffffff4d;border-color:#0099ff4d}.card-content[_ngcontent-%COMP%]{padding:25px;display:flex;flex-direction:column;align-items:center;position:relative;background:#231e1f}.logo-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;margin-bottom:20px;position:relative}.logo-container[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-10px;left:50%;transform:translate(-50%);width:60px;height:2px;background:linear-gradient(90deg,transparent,rgba(0,153,255,.6),transparent);border-radius:1px}.logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px;width:auto;max-width:120px;object-fit:contain;border-radius:12px;transition:all .3s ease;filter:drop-shadow(0 4px 12px rgba(0,0,0,.3))}.logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05);filter:drop-shadow(0 6px 20px rgba(0,153,255,.4))}.channel-name[_ngcontent-%COMP%]{color:#fff;font-size:20px;font-weight:700;text-align:center;margin-bottom:20px;letter-spacing:.5px;text-shadow:0 2px 8px rgba(0,0,0,.5);background:linear-gradient(135deg,#fff,#e0e0e0);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;position:relative}.channel-name[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-8px;left:50%;transform:translate(-50%);width:40px;height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.4),transparent)}.favorite-button[_ngcontent-%COMP%]{width:100%;margin-top:10px}.favorite-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px;background:linear-gradient(135deg,#09f,#0c9);border:none;border-radius:25px;padding:14px 24px;color:#fff;font-weight:600;font-size:14px;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);width:100%;text-transform:uppercase;letter-spacing:.5px;position:relative;overflow:hidden}.favorite-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s ease}.favorite-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #09f6,0 4px 15px #00cc994d;background:linear-gradient(135deg,#08f,#00b894)}.favorite-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:before{left:100%}.favorite-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 4px 15px #0099ff4d,0 2px 8px #0c93}.favorite-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff;font-size:18px;transition:transform .3s ease}.favorite-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%]{transform:scale(1.1)}.list-md[_ngcontent-%COMP%]{background:transparent}.divider[_ngcontent-%COMP%]{width:calc(100% - 40px);height:1px;margin:0 auto;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent)}.program-time[_ngcontent-%COMP%]{font-size:.85rem;color:#a0a0a0;font-weight:500;display:flex;align-items:center;gap:8px;margin-bottom:4px}.program-time[_ngcontent-%COMP%]   .live-indicator[_ngcontent-%COMP%]{align-items:center;background:linear-gradient(135deg,#ff4757,#ff3742);color:#fff;border-radius:2px;padding:2px 4px;font-size:.7rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px}.program-time[_ngcontent-%COMP%]   .live-indicator[_ngcontent-%COMP%]:before{content:"\\25cf";line-height:7px;margin-top:-2px}.program-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem;line-height:1.3;color:#fff;margin:0;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.program-desc[_ngcontent-%COMP%]{margin-top:8px;font-weight:400;font-size:.9rem;line-height:1.4;color:#b0b0b0;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.program-status[_ngcontent-%COMP%]{display:inline-flex;align-items:center;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.program-status.status-now[_ngcontent-%COMP%], .program-status.status-upcoming[_ngcontent-%COMP%], .program-status.status-next[_ngcontent-%COMP%], .program-status.status-later[_ngcontent-%COMP%]{color:#fff}.program-buttons-container[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:center;gap:30px;align-items:center;margin:12px 0}.program-button[_ngcontent-%COMP%]{margin:6px 0;--background: #006699;background:#069;--background-hover: linear-gradient(145deg, rgba(0, 153, 255, .2), rgba(0, 204, 153, .15));--background-activated: linear-gradient(145deg, rgba(0, 153, 255, .3), rgba(0, 204, 153, .2));--border-radius: 50%;--padding-start: 10px;--padding-end: 10px;--padding-top: 10px;--padding-bottom: 10px;padding:10px 10px 6px;transition:all .3s cubic-bezier(.4,0,.2,1);border:1px solid rgba(255,255,255,.15);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:50%;position:relative;border-width:3px;border-color:transparent}.program-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #0099ff4d;border-color:#09f6}.program-button[_ngcontent-%COMP%]:active{transform:translateY(0)}.program-button.button-clicked[_ngcontent-%COMP%]{background:linear-gradient(145deg,#0099ff40,#0c93);border-color:#09f9;animation:_ngcontent-%COMP%_button-pulse .6s cubic-bezier(.4,0,.2,1)}.program-button.button-clicked[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:brightness(1.5) drop-shadow(0 0 12px rgba(0,153,255,.8))}.program-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:16px;width:16px;filter:brightness(1.2);transition:all .3s ease}.program-button[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{filter:brightness(1.5) drop-shadow(0 0 8px rgba(0,153,255,.6))}.tv-focus[_ngcontent-%COMP%]{background:#004a6f;border:3px solid #09f}.tv-focus[_ngcontent-%COMP%]   .channel-scroll[_ngcontent-%COMP%]:before{width:100%!important}.vedeo-loading[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000;z-index:100001;display:flex;justify-content:center;align-items:center}.vedeo-loading[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:50%;width:50px;height:50px;margin:-25px 0 0 -25px;border:4px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}.vedeo-loading.active[_ngcontent-%COMP%]{opacity:1;visibility:visible}.pulse-on-click.button-clicked[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_button-pulse .6s cubic-bezier(.4,0,.2,1)}.pulse-continuous[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_button-pulse 2s infinite}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideInFromRight{0%{opacity:0;transform:translate(100px)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_burger-pulse{0%,to{box-shadow:0 10px 35px #09f6,0 4px 15px #00cc994d,inset 0 1px #fff3}50%{box-shadow:0 12px 45px #09f9,0 6px 25px #00cc9980,inset 0 1px #ffffff4d}}@keyframes _ngcontent-%COMP%_button-pulse{0%{transform:scale(1);box-shadow:0 0 #0099ffb3}50%{transform:scale(1.05);box-shadow:0 0 0 15px #0099ff4d}70%{transform:scale(.98);box-shadow:0 0 0 25px #0099ff1a}to{transform:scale(1);box-shadow:0 0 #09f0}}@keyframes _ngcontent-%COMP%_button-ripple{0%{transform:scale(1);box-shadow:0 0 #09fc,0 0 #0c99}25%{transform:scale(1.02);box-shadow:0 0 0 8px #09f6,0 0 #0c99}50%{transform:scale(1.05);box-shadow:0 0 0 15px #09f3,0 0 0 8px #00cc994d}75%{transform:scale(1.02);box-shadow:0 0 0 20px #0099ff1a,0 0 0 15px #00cc991a}to{transform:scale(1);box-shadow:0 0 #09f0,0 0 #0c90}}@keyframes _ngcontent-%COMP%_pulse-live{0%,to{transform:scale(1);box-shadow:0 4px 15px #ff475766;opacity:1}50%{transform:scale(1.05);box-shadow:0 4px 25px #ff4757cc,0 0 20px #ff475799;opacity:.9}}@keyframes _ngcontent-%COMP%_blink{0%,50%{opacity:1;transform:scale(1)}51%,to{opacity:.3;transform:scale(.8)}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.back-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .burger-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:2px solid rgba(0,153,255,.6);outline-offset:2px}@media (max-width: 768px){.back-button[_ngcontent-%COMP%]{top:15px;left:15px}.back-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:14px}.back-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}.burger-button[_ngcontent-%COMP%]{bottom:25px;left:15px}.burger-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:16px}.burger-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px;height:22px}}.shaka-controls-button-panel[_ngcontent-%COMP%]{display:none!important}  .shaka-controls-button-panel{display:none!important}[_ngcontent-%COMP%]::ng--deep   .shaka-controls-button-panel[_ngcontent-%COMP%]{display:none!important}[_ngcontent-%COMP%]:ng-deep   .shaka-controls-button-panel[_ngcontent-%COMP%]{display:none!important}[_ngcontent-%COMP%]:ng--deep   .shaka-controls-button-panel[_ngcontent-%COMP%]{display:none!important}  item-inner{padding:0!important}[_ngcontent-%COMP%]::ng--deep   item-inner[_ngcontent-%COMP%]{padding:0!important}[_ngcontent-%COMP%]:ng-deep   item-inner[_ngcontent-%COMP%]{padding:0!important}[_ngcontent-%COMP%]:ng--deep   item-inner[_ngcontent-%COMP%]{padding:0!important}.program-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-top:12px;padding:8px 0;margin-right:4px}.program-progress[_ngcontent-%COMP%]   .progress-bar-container[_ngcontent-%COMP%]{flex:1;height:6px;background-color:#fff3;border-radius:3px;overflow:hidden;box-shadow:inset 0 1px 3px #0003}.program-progress[_ngcontent-%COMP%]   .progress-bar-container[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#0e2a57,#175b80 31.25%,#18b9f4 66.35%,#00d4ff);border-radius:3px;transition:width .04s ease;min-width:3px;box-shadow:0 1px 3px #0099ff4d}.program-progress[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{font-size:13px;color:#fff;font-weight:600;min-width:40px;text-align:right;text-shadow:0 1px 2px rgba(0,0,0,.5)}.program-info-panel[_ngcontent-%COMP%]{position:fixed;top:0;right:-440px;width:440px;height:100%;background:linear-gradient(135deg,#0e2a57f2,#175b80f2,#18b9f4f2);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-left:1px solid rgba(255,255,255,.1);z-index:100020100020100020000000000000000000000000000000;transition:right .3s cubic-bezier(.25,.46,.45,.94);box-shadow:-5px 0 25px #0000004d;color:#fff;overflow:visible}.program-info-panel.show[_ngcontent-%COMP%]{right:0}.program-info-panel[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.program-info-panel[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff0d}.program-info-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#fff3;border-radius:3px}.program-info-header[_ngcontent-%COMP%]{padding:40px;border-bottom:1px solid rgba(255,255,255,.1);background:#0003}.program-info-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:#fff}.program-info-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{--color: #fff;--background: transparent;--background-hover: rgba(255, 255, 255, .1);--border-radius: 50%;width:40px;height:40px;margin:0}.program-info-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.program-info-content[_ngcontent-%COMP%]{padding:24px}.program-title[_ngcontent-%COMP%]{margin-bottom:16px}.program-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:700;color:#fff;line-height:1.3;text-shadow:0 2px 4px rgba(0,0,0,.3)}.program-time[_ngcontent-%COMP%]{margin-bottom:20px}.program-time[_ngcontent-%COMP%]   .time-badge[_ngcontent-%COMP%]{display:inline-block;background:#ffffff26;padding:8px 16px;border-radius:20px;font-size:14px;font-weight:600;color:#fff;border:1px solid rgba(255,255,255,.2);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.program-description[_ngcontent-%COMP%]{margin-bottom:24px}.program-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;line-height:1.6;color:#ffffffe6;text-shadow:0 1px 2px rgba(0,0,0,.3)}.channel-info[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:24px;padding:16px;background:#ffffff14;border-radius:12px;border:1px solid rgba(255,255,255,.1)}.channel-info[_ngcontent-%COMP%]   .channel-logo[_ngcontent-%COMP%]{margin-right:16px;flex-shrink:0}.channel-info[_ngcontent-%COMP%]   .channel-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;object-fit:contain;border-radius:8px;background:#ffffff1a;padding:4px}.channel-info[_ngcontent-%COMP%]   .channel-details[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 4px;font-size:18px;font-weight:600;color:#fff}.channel-info[_ngcontent-%COMP%]   .channel-details[_ngcontent-%COMP%]   .channel-number[_ngcontent-%COMP%]{font-size:14px;color:#ffffffb3;font-weight:500}.program-progress-info[_ngcontent-%COMP%]   .progress-label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#fff;margin-bottom:8px;text-transform:uppercase;letter-spacing:.5px}.program-progress-info[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:8px;background:#fff3;border-radius:4px;overflow:hidden;margin-bottom:8px;position:relative}.program-progress-info[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#0e2a57,#175b80 31.25%,#18b9f4 66.35%,#00d4ff);border-radius:4px;transition:width .3s ease;box-shadow:0 2px 8px #18b9f466}.program-progress-info[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{font-size:14px;color:#fff;font-weight:600;text-align:right}.no-program-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 24px;text-align:center}.no-program-info[_ngcontent-%COMP%]   .no-info-icon[_ngcontent-%COMP%]{font-size:64px;color:#ffffff4d;margin-bottom:16px}.no-program-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#fff9;font-weight:500}.program-info-footer[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;background:#0000004d;border-top:1px solid rgba(255,255,255,.1);display:flex;justify-content:center}.program-info-footer[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%], .program-info-footer[_ngcontent-%COMP%]   .back-button--program-info[_ngcontent-%COMP%]{border-radius:12px;padding:6px 6px 2px;font-weight:600;border:2px solid transparent;transition:all .3s ease}.program-info-footer[_ngcontent-%COMP%]   .back-button.focused[_ngcontent-%COMP%], .program-info-footer[_ngcontent-%COMP%]   .back-button--program-info.focused[_ngcontent-%COMP%]{background:#fff;transform:scale(1.05)}.program-info-footer[_ngcontent-%COMP%]   .back-button.focused[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .program-info-footer[_ngcontent-%COMP%]   .back-button--program-info.focused[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:invert(1)}.program-info-footer[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]:hover, .program-info-footer[_ngcontent-%COMP%]   .back-button--program-info[_ngcontent-%COMP%]:hover{--background: rgba(255, 255, 255, .2)}.back-button--info[_ngcontent-%COMP%]{background:#fff!important}.back-button--info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:invert(1)}.program-info-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;z-index:100015;opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s ease}.program-info-backdrop.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.button-clicked[_ngcontent-%COMP%]{transform:scale(.95);transition:transform .1s ease}.epg-loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000c;display:flex;justify-content:center;align-items:center;z-index:100020}.epg-loading-overlay[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]{text-align:center;color:#fff}.epg-loading-overlay[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:50px;height:50px;margin-bottom:20px}.epg-loading-overlay[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;margin:0;font-weight:500}']});let i=a;return i})();export{cn as LiveTvPage};
