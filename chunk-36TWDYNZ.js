import{C as E,Ca as k,F as j,N as x,Q,S as Y,d as C,f as d,g as R,h as P,i as M,j as z,m as W,n as v,o as N,p as K,r as c,s as Z,t as b,u as l}from"./chunk-4YXWHVVD.js";import{a as F,h as o}from"./chunk-OYAVQN5W.js";var g=class{},_=(()=>{let t=class t extends g{getTranslation(e){return C({})}};o(t,"\u0275fac",(()=>{let e;return function(i){return(e||(e=E(t)))(i||t)}})()),o(t,"\u0275prov",c({token:t,factory:t.\u0275fac}));let s=t;return s})(),D=class{},ee=(()=>{let t=class t{handle(e){return e.key}};o(t,"\u0275fac",function(n){return new(n||t)}),o(t,"\u0275prov",c({token:t,factory:t.\u0275fac}));let s=t;return s})();function I(s,t){if(s===t)return!0;if(s===null||t===null)return!1;if(s!==s&&t!==t)return!0;let u=typeof s,e=typeof t,n,i,a;if(u==e&&u=="object")if(Array.isArray(s)){if(!Array.isArray(t))return!1;if((n=s.length)==t.length){for(i=0;i<n;i++)if(!I(s[i],t[i]))return!1;return!0}}else{if(Array.isArray(t))return!1;a=Object.create(null);for(i in s){if(!I(s[i],t[i]))return!1;a[i]=!0}for(i in t)if(!(i in a)&&typeof t[i]<"u")return!1;return!0}return!1}function f(s){return typeof s<"u"&&s!==null}function y(s){return A(s)&&!J(s)&&s!==null}function A(s){return typeof s=="object"}function J(s){return Array.isArray(s)}function X(s){return typeof s=="string"}function ie(s){return typeof s=="function"}function O(s,t){let u=Object.assign({},s);return A(s)?(A(s)&&A(t)&&Object.keys(t).forEach(e=>{y(t[e])?e in s?u[e]=O(s[e],t[e]):Object.assign(u,{[e]:t[e]}):Object.assign(u,{[e]:t[e]})}),u):O({},t)}function U(s,t){let u=t.split(".");t="";do t+=u.shift(),f(s)&&f(s[t])&&(y(s[t])||J(s[t])||!u.length)?(s=s[t],t=""):u.length?t+=".":s=void 0;while(u.length);return s}function ae(s,t,u){let e=t.split("."),n=s;for(let i=0;i<e.length;i++){let a=e[i];i===e.length-1?n[a]=u:((!n[a]||!y(n[a]))&&(n[a]={}),n=n[a])}}var p=class{},te=(()=>{let t=class t extends p{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(e,n){if(X(e))return this.interpolateString(e,n);if(ie(e))return this.interpolateFunction(e,n)}interpolateFunction(e,n){return e(n)}interpolateString(e,n){return n?e.replace(this.templateMatcher,(i,a)=>{let r=U(n,a);return f(r)?r:i}):e}};o(t,"\u0275fac",(()=>{let e;return function(i){return(e||(e=E(t)))(i||t)}})()),o(t,"\u0275prov",c({token:t,factory:t.\u0275fac}));let s=t;return s})(),L=class{},ne=(()=>{let t=class t extends L{compile(e,n){return e}compileTranslations(e,n){return e}};o(t,"\u0275fac",(()=>{let e;return function(i){return(e||(e=E(t)))(i||t)}})()),o(t,"\u0275prov",c({token:t,factory:t.\u0275fac}));let s=t;return s})(),T=class{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new j;onLangChange=new j;onDefaultLangChange=new j},B=new b("ISOLATE_TRANSLATE_SERVICE"),G=new b("USE_DEFAULT_LANG"),H=new b("DEFAULT_LANGUAGE"),$=new b("USE_EXTEND"),m=s=>d(s)?s:C(s),q=(()=>{let t=class t{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;extend;loadingTranslations;pending=!1;_translationRequests={};lastUseLanguage=null;get onTranslationChange(){return this.store.onTranslationChange}get onLangChange(){return this.store.onLangChange}get onDefaultLangChange(){return this.store.onDefaultLangChange}get defaultLang(){return this.store.defaultLang}set defaultLang(e){this.store.defaultLang=e}get currentLang(){return this.store.currentLang}set currentLang(e){this.store.currentLang=e}get langs(){return this.store.langs}set langs(e){this.store.langs=e}get translations(){return this.store.translations}set translations(e){this.store.translations=e}constructor(e,n,i,a,r,V=!0,h=!1,w=!1,S){this.store=e,this.currentLoader=n,this.compiler=i,this.parser=a,this.missingTranslationHandler=r,this.useDefaultLang=V,this.extend=w,h&&(this.store=new T),S&&this.setDefaultLang(S)}setDefaultLang(e){if(e===this.defaultLang)return;let n=this.retrieveTranslations(e);typeof n<"u"?(this.defaultLang==null&&(this.defaultLang=e),n.pipe(v(1)).subscribe(()=>{this.changeDefaultLang(e)})):this.changeDefaultLang(e)}getDefaultLang(){return this.defaultLang}use(e){if(this.lastUseLanguage=e,e===this.currentLang)return C(this.translations[e]);this.currentLang||(this.currentLang=e);let n=this.retrieveTranslations(e);return d(n)?(n.pipe(v(1)).subscribe(()=>{this.changeLang(e)}),n):(this.changeLang(e),C(this.translations[e]))}changeLang(e){e===this.lastUseLanguage&&(this.currentLang=e,this.onLangChange.emit({lang:e,translations:this.translations[e]}),this.defaultLang==null&&this.changeDefaultLang(e))}retrieveTranslations(e){if(typeof this.translations[e]>"u"||this.extend)return this._translationRequests[e]=this._translationRequests[e]||this.loadAndCompileTranslations(e),this._translationRequests[e]}getTranslation(e){return this.loadAndCompileTranslations(e)}loadAndCompileTranslations(e){this.pending=!0;let n=this.currentLoader.getTranslation(e).pipe(N(1),v(1));return this.loadingTranslations=n.pipe(R(i=>this.compiler.compileTranslations(i,e)),N(1),v(1)),this.loadingTranslations.subscribe({next:i=>{this.translations[e]=this.extend&&this.translations[e]?F(F({},i),this.translations[e]):i,this.updateLangs(),this.pending=!1},error:i=>{this.pending=!1}}),n}setTranslation(e,n,i=!1){let a=this.compiler.compileTranslations(n,e);(i||this.extend)&&this.translations[e]?this.translations[e]=O(this.translations[e],a):this.translations[e]=a,this.updateLangs(),this.onTranslationChange.emit({lang:e,translations:this.translations[e]})}getLangs(){return this.langs}addLangs(e){let n=e.filter(i=>!this.langs.includes(i));n.length>0&&(this.langs=[...this.langs,...n])}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResultForKey(e,n,i){let a;if(e&&(a=this.runInterpolation(U(e,n),i)),a===void 0&&this.defaultLang!=null&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(a=this.runInterpolation(U(this.translations[this.defaultLang],n),i)),a===void 0){let r={key:n,translateService:this};typeof i<"u"&&(r.interpolateParams=i),a=this.missingTranslationHandler.handle(r)}return a!==void 0?a:n}runInterpolation(e,n){if(J(e))return e.map(i=>this.runInterpolation(i,n));if(y(e)){let i={};for(let a in e){let r=this.runInterpolation(e[a],n);r!==void 0&&(i[a]=r)}return i}else return this.parser.interpolate(e,n)}getParsedResult(e,n,i){if(n instanceof Array){let a={},r=!1;for(let h of n)a[h]=this.getParsedResultForKey(e,h,i),r=r||d(a[h]);if(!r)return a;let V=n.map(h=>m(a[h]));return z(V).pipe(R(h=>{let w={};return h.forEach((S,se)=>{w[n[se]]=S}),w}))}return this.getParsedResultForKey(e,n,i)}get(e,n){if(!f(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return this.pending?this.loadingTranslations.pipe(W(i=>m(this.getParsedResult(i,e,n)))):m(this.getParsedResult(this.translations[this.currentLang],e,n))}getStreamOnTranslationChange(e,n){if(!f(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return P(M(()=>this.get(e,n)),this.onTranslationChange.pipe(K(i=>{let a=this.getParsedResult(i.translations,e,n);return m(a)})))}stream(e,n){if(!f(e)||!e.length)throw new Error('Parameter "key" required');return P(M(()=>this.get(e,n)),this.onLangChange.pipe(K(i=>{let a=this.getParsedResult(i.translations,e,n);return m(a)})))}instant(e,n){if(!f(e)||e.length===0)throw new Error('Parameter "key" is required and cannot be empty');let i=this.getParsedResult(this.translations[this.currentLang],e,n);return d(i)?Array.isArray(e)?e.reduce((a,r)=>(a[r]=r,a),{}):e:i}set(e,n,i=this.currentLang){ae(this.translations[i],e,X(n)?this.compiler.compile(n,i):this.compiler.compileTranslations(n,i)),this.updateLangs(),this.onTranslationChange.emit({lang:i,translations:this.translations[i]})}changeDefaultLang(e){this.defaultLang=e,this.onDefaultLangChange.emit({lang:e,translations:this.translations[e]})}reloadLang(e){return this.resetLang(e),this.loadAndCompileTranslations(e)}resetLang(e){delete this._translationRequests[e],delete this.translations[e]}getBrowserLang(){if(typeof window>"u"||!window.navigator)return;let e=this.getBrowserCultureLang();return e?e.split(/[-_]/)[0]:void 0}getBrowserCultureLang(){if(!(typeof window>"u"||typeof window.navigator>"u"))return window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}};o(t,"\u0275fac",function(n){return new(n||t)(l(T),l(g),l(L),l(p),l(D),l(G),l(B),l($),l(H))}),o(t,"\u0275prov",c({token:t,factory:t.\u0275fac,providedIn:"root"}));let s=t;return s})();var be=(()=>{let t=class t{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(e,n){this.translate=e,this._ref=n}updateValue(e,n,i){let a=r=>{this.value=r!==void 0?r:e,this.lastKey=e,this._ref.markForCheck()};if(i){let r=this.translate.getParsedResult(i,e,n);d(r)?r.subscribe(a):a(r)}this.translate.get(e,n).subscribe(a)}transform(e,...n){if(!e||!e.length)return e;if(I(e,this.lastKey)&&I(n,this.lastParams))return this.value;let i;if(f(n[0])&&n.length)if(X(n[0])&&n[0].length){let a=n[0].replace(/(')?([a-zA-Z0-9_]+)(')?(\s)?:/g,'"$2":').replace(/:(\s)?(')(.*?)(')/g,':"$3"');try{i=JSON.parse(a)}catch(r){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${n[0]}`)}}else y(n[0])&&(i=n[0]);return this.lastKey=e,this.lastParams=n,this.updateValue(e,i),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(a=>{this.lastKey&&a.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(e,i,a.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(a=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,i,a.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,i))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}};o(t,"\u0275fac",function(n){return new(n||t)(x(q,16),x(k,16))}),o(t,"\u0275pipe",Y({name:"translate",type:t,pure:!1})),o(t,"\u0275prov",c({token:t,factory:t.\u0275fac}));let s=t;return s})();var me=(()=>{let t=class t{static forRoot(e={}){return{ngModule:t,providers:[e.loader||{provide:g,useClass:_},e.compiler||{provide:L,useClass:ne},e.parser||{provide:p,useClass:te},e.missingTranslationHandler||{provide:D,useClass:ee},T,{provide:B,useValue:e.isolate},{provide:G,useValue:e.useDefaultLang},{provide:$,useValue:e.extend},{provide:H,useValue:e.defaultLanguage},q]}}static forChild(e={}){return{ngModule:t,providers:[e.loader||{provide:g,useClass:_},e.compiler||{provide:L,useClass:ne},e.parser||{provide:p,useClass:te},e.missingTranslationHandler||{provide:D,useClass:ee},{provide:B,useValue:e.isolate},{provide:G,useValue:e.useDefaultLang},{provide:$,useValue:e.extend},{provide:H,useValue:e.defaultLanguage},q]}}};o(t,"\u0275fac",function(n){return new(n||t)}),o(t,"\u0275mod",Q({type:t})),o(t,"\u0275inj",Z({}));let s=t;return s})();export{g as a,q as b,be as c,me as d};
