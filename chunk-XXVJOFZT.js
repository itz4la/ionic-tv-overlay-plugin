import{a as _}from"./chunk-DBKQNAU4.js";import{c as A}from"./chunk-26SYI5YV.js";import{d as S}from"./chunk-S2XR63X6.js";import{b as O,c as D,d as L}from"./chunk-36TWDYNZ.js";import{$ as c,Aa as p,Eb as P,G as E,Gb as M,Hb as C,Ja as I,K as b,L as g,M as v,N as o,P as x,aa as d,ba as y,ga as k,ra as u,sa as w,ta as B,za as f}from"./chunk-4YXWHVVD.js";import"./chunk-PR5NG4DJ.js";import"./chunk-3VVAHO66.js";import"./chunk-6MXH2XA5.js";import"./chunk-7UI5LT65.js";import"./chunk-PDVW5TD3.js";import"./chunk-WR6SSK3X.js";import"./chunk-4U6PRYVA.js";import"./chunk-ILEDPWO7.js";import"./chunk-JWIEPCRG.js";import"./chunk-C5RQ2IC2.js";import"./chunk-D4VGNZLR.js";import"./chunk-JHLW7V75.js";import"./chunk-SV7S5NYR.js";import{i as m}from"./chunk-OYAVQN5W.js";var W=(()=>{let s=class s{constructor(t,e,n,r,i,a){this.navCtrl=t,this.zone=e,this.renderer2=n,this.platform=r,this.storageService=i,this.translate=a,this.currentElementId="ar",this.islistening=!1,this.backButtonPressed=!1,this.navMap=[{id:"ar",right:"fr",lang:"ar",action:"changeLanguage",type:"managed"},{id:"fr",right:"en",left:"ar",lang:"fr",action:"changeLanguage",type:"managed"},{id:"en",left:"fr",lang:"en",action:"changeLanguage",type:"managed"}]}ngOnInit(){this.setupBackButtonHandler()}ngOnDestroy(){this.backButtonTimeout&&clearTimeout(this.backButtonTimeout)}ionViewDidEnter(){this.backButtonSub=this.platform.backButton.subscribeWithPriority(10,()=>{this.onReturn()}),this.islistening=!0,this.initNavStart()}ionViewDidLeave(){this.backButtonSub&&this.backButtonSub.unsubscribe(),this.currentElement=null,this.currentElementId="ar",this.islistening=!1}setupBackButtonHandler(){window.handleBackButton=()=>{if(console.log("Back button pressed from Android - home page"),this.backButtonPressed){console.log("Back button already pressed, ignoring duplicate");return}this.backButtonPressed=!0,this.zone.run(()=>{this.handleKeyDown(new KeyboardEvent("keydown",{key:"Backspace"}))}),this.backButtonTimeout=setTimeout(()=>{this.backButtonPressed=!1},300)}}initNavStart(){return m(this,null,function*(){let t=yield this.storageService.get("lang");this.currentElement=this.findElementByLang(t),this.currentElementId=this.currentElement.id,this.setActive(this.currentElementId,"open",this.currentElement.id)})}changeLanguage(){return m(this,null,function*(){let t=this.currentElement.lang;yield this.storageService.set("lang",t),this.translate.use(t),_(t)})}handleKeyDown(t){if(this.islistening&&this.currentElement.type!=="self")switch(t.key){case"ArrowUp":this.onUp();break;case"ArrowDown":this.onDown();break;case"ArrowLeft":this.onLeft();break;case"ArrowRight":this.onRight();break;case"Enter":this.onOk();break;case"Backspace":case"backButton":case"Escape":this.onReturn();break;default:console.log(`[settings] Unhandled key: ${t.key}`)}}onUp(){this.zone.run(()=>{if(this.currentElement.up){let t=this.currentElement.up;if(document.getElementById(t)){let n=this.findElement(t);this.setNotActive(this.currentElementId),this.setActive(t,"up",this.currentElement.id),this.currentElement=n,this.currentElementId=t}}})}onDown(){this.zone.run(()=>{if(this.currentElement.down){let t=this.currentElement.down;if(document.getElementById(t)){let n=this.findElement(t);this.setNotActive(this.currentElementId),this.setActive(t,"down",this.currentElement.id),this.currentElement=n,this.currentElementId=t}}})}onLeft(){this.zone.run(()=>{if(this.currentElement.left){let t=this.currentElement.left;if(document.getElementById(t)){let n=this.findElement(t);this.setNotActive(this.currentElementId),this.setActive(t,"left",this.currentElement.id),this.currentElement=n,this.currentElementId=t}}})}onRight(){this.zone.run(()=>{if(this.currentElement.right){let t=this.currentElement.right;if(document.getElementById(t)){let n=this.findElement(t);this.setNotActive(this.currentElementId),this.setActive(t,"right",this.currentElement.id),this.currentElement=n,this.currentElementId=t}}})}onOk(){if(this.currentElement.action){let t=this.currentElement.action;this.zone.run(()=>{typeof this[t]=="function"&&this[t]()})}}onReturn(){this.zone.run(()=>{this.navCtrl.navigateBack("/home")})}setActive(t,e,n){return m(this,null,function*(){let r=l=>new Promise(z=>setTimeout(z,l)),i=!1,a=0;do{if(yield r(200),t!=="sidenav"){let l=document.getElementById(t);l&&(this.renderer2.addClass(l,"active"),l.setAttribute("tabindex","0"),l.focus(),i=!0)}a++}while(!i&&a<20)})}setNotActive(t){return m(this,null,function*(){let e=i=>new Promise(a=>setTimeout(a,i)),n=!1,r=0;do{yield e(200);let i=document.getElementById(t);i?(this.renderer2.removeClass(i,"active"),i.setAttribute("tabindex","-1"),document.activeElement===i&&i.blur(),n=!0):r++}while(!n&&r<20)})}findElement(t){for(let e of this.navMap)if(e.id===t)return e;return this.navMap[0]}findElementByLang(t){for(let e of this.navMap)if(e.lang===t)return e;return this.navMap[0]}};s.\u0275fac=function(e){return new(e||s)(o(C),o(E),o(v),o(M),o(S),o(O))},s.\u0275cmp=x({type:s,selectors:[["app-language"]],hostBindings:function(e,n){e&1&&k("keydown",function(i){return n.handleKeyDown(i)},!1,b)},decls:18,vars:6,consts:[[1,"settings-container"],[1,"main-content"],[1,"back-link"],[1,"ki-filled","ki-arrow-left"],[1,"content-panel"],["dir","ltr",1,"language-buttons"],["id","ar","tabindex","-1","data-lang","ar",1,"lang-btn"],["id","fr","tabindex","-1","data-lang","fr",1,"lang-btn"],["id","en","tabindex","-1","data-lang","en",1,"lang-btn"]],template:function(e,n){e&1&&(c(0,"ion-content")(1,"div",0)(2,"main",1)(3,"a",2),y(4,"i",3),u(5),f(6,"translate"),d(),c(7,"div",4)(8,"h2"),u(9),f(10,"translate"),d(),c(11,"div",5)(12,"button",6),u(13,"\u0627\u0644\u0639\u0631\u0628\u064A\u0629"),d(),c(14,"button",7),u(15,"Fran\xE7ais"),d(),c(16,"button",8),u(17,"English"),d()()()()()()),e&2&&(g(5),B(" ",p(6,2,"Return")," "),g(4),w(p(10,4,"Select your language")))},dependencies:[A,I,P,L,D],styles:[".settings-container[_ngcontent-%COMP%]{display:flex;height:100vh;color:var(--text-color);font-family:var(--font-family);overflow:hidden;background:linear-gradient(106.23deg,#083d8a0a -41.89%,#031a3af0 1.41%,#04234eb6 67.28%,#083d8a0a 126.74%);outline:none}.main-content[_ngcontent-%COMP%]{flex-grow:1;padding:2rem 3rem;display:flex;flex-direction:column;outline:none}.back-link[_ngcontent-%COMP%]{align-self:flex-end;color:var(--text-color-muted);text-decoration:none;font-size:.9rem;display:flex;align-items:center;gap:.5rem;transition:color .2s ease;outline:none}.content-panel[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;outline:none}.content-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:30px}.language-selector-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:28px;font-weight:600;color:#fff;margin-top:0;margin-bottom:30px}.language-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px;flex-wrap:wrap}.lang-btn[_ngcontent-%COMP%]{outline:none!important;background-color:transparent;border:1px solid #5a637c;color:#d4d7dc;padding:14px 32px;font-size:16px;border-radius:50px;cursor:pointer;font-family:inherit;font-weight:500;transition:background-color .3s ease,color .3s ease,border-color .3s ease}.lang-btn.active[_ngcontent-%COMP%]{background-color:#fff;color:#0a1428;border-color:#fff}"]});let h=s;return h})();export{W as LanguagePage};
