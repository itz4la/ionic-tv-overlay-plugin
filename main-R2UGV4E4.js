import{a as $}from"./chunk-DBKQNAU4.js";import{a as k,b as R,e as L}from"./chunk-26SYI5YV.js";import{a as B}from"./chunk-YV6SONE4.js";import{a as E,b as J}from"./chunk-2BJLPANP.js";import{a as u}from"./chunk-5GVKMHBT.js";import{a as F,c as N,d as q}from"./chunk-S2XR63X6.js";import{a as H,b as O,d as V}from"./chunk-36TWDYNZ.js";import{$ as y,Hb as T,Ja as w,La as j,N as p,Na as h,Oa as x,P as I,Pa as A,Sa as M,Ta as c,Wa as P,Xa as D,Ya as b,Yb as U,aa as S,ba as C,r as s,u as a,x as m}from"./chunk-4YXWHVVD.js";import"./chunk-PHJ65MTQ.js";import"./chunk-NGAVIYQ2.js";import"./chunk-DFS7RQGK.js";import"./chunk-IP3IRUG3.js";import"./chunk-YUJWRDDX.js";import"./chunk-HC6MZPB3.js";import"./chunk-PR5NG4DJ.js";import"./chunk-QOCRLRQJ.js";import"./chunk-RMJ7PCZJ.js";import"./chunk-LSZSCLUI.js";import"./chunk-T6LT6B37.js";import"./chunk-QAYK5YJO.js";import"./chunk-EZ6AITSJ.js";import"./chunk-GNOVVPTF.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import"./chunk-HE67GXZG.js";import"./chunk-MCRJI3T3.js";import"./chunk-BAKMWPBW.js";import"./chunk-3VVAHO66.js";import"./chunk-6MXH2XA5.js";import"./chunk-7UI5LT65.js";import"./chunk-PDVW5TD3.js";import"./chunk-WR6SSK3X.js";import"./chunk-4U6PRYVA.js";import"./chunk-ILEDPWO7.js";import"./chunk-JWIEPCRG.js";import"./chunk-C5RQ2IC2.js";import"./chunk-D4VGNZLR.js";import"./chunk-JHLW7V75.js";import"./chunk-SV7S5NYR.js";import{h as l,i as n}from"./chunk-OYAVQN5W.js";var z=(()=>{let e=class e{canActivate(r,i){return n(this,null,function*(){return(yield this.Auth.isLoggedIn())?this.router.parseUrl("/home"):!0})}constructor(r,i){this.Auth=r,this.router=i}};e.\u0275fac=function(i){return new(i||e)(a(u),a(c))},e.\u0275prov=s({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var W=(()=>{let e=class e{canActivate(r,i){return n(this,null,function*(){return(yield this.Auth.isLoggedIn())?!0:this.router.parseUrl("/authentication")})}constructor(r,i){this.Auth=r,this.router=i}};e.\u0275fac=function(i){return new(i||e)(a(u),a(c))},e.\u0275prov=s({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var G=[{path:"home",loadComponent:()=>import("./chunk-QUJZHOL7.js").then(t=>t.HomePage)},{path:"",redirectTo:"home",pathMatch:"full"},{path:"authentication",loadComponent:()=>import("./chunk-NDFGS6KG.js").then(t=>t.AuthScreenPage),canActivate:[z]},{path:"payment",loadComponent:()=>import("./chunk-PFZ4KBWQ.js").then(t=>t.PaymentPage),canActivate:[W]},{path:"live-tv",loadComponent:()=>import("./chunk-FYFIKMNW.js").then(t=>t.LiveTvPage)},{path:"comming-soon",loadComponent:()=>import("./chunk-YJAOUGKQ.js").then(t=>t.CommingSoonPage)},{path:"settings",loadComponent:()=>import("./chunk-JMF52PKM.js").then(t=>t.SettingsPage)},{path:"search",loadComponent:()=>import("./chunk-L754Q6MB.js").then(t=>t.SearchPage)},{path:"my-liste",loadComponent:()=>import("./chunk-JWMLT7MS.js").then(t=>t.MyListePage)},{path:"my-watch",loadComponent:()=>import("./chunk-L6N56PI4.js").then(t=>t.MyWatchPage)},{path:"no-connection",loadComponent:()=>import("./chunk-PM5CK3HL.js").then(t=>t.NoConnectionPage)},{path:"update-version",loadComponent:()=>import("./chunk-NR7P2AYN.js").then(t=>t.UpdateVersionPage)},{path:"language",loadComponent:()=>import("./chunk-XXVJOFZT.js").then(t=>t.LanguagePage)}];var g=B("Network",{web:()=>import("./chunk-GDJMIVJI.js").then(t=>new t.NetworkWeb)});var K=(()=>{let e=class e{constructor(r,i){this.navCtrl=r,this.router=i,this.startMonitoring()}startMonitoring(){return n(this,null,function*(){let r=yield g.getStatus();this.checkInternet(r.connected),g.addListener("networkStatusChange",i=>{this.checkInternet(i.connected)}),this.intervalId=setInterval(()=>{this.checkInternet(!0)},12e4)})}checkInternet(r){return n(this,null,function*(){if(!r){this.navCtrl.navigateBack("/no-connection");return}try{yield fetch("https://www.google.com",{method:"HEAD",mode:"no-cors"}),this.router.url==="/no-connection"&&this.navCtrl.navigateBack("/home")}catch{this.navCtrl.navigateBack("/no-connection")}})}stopMonitoring(){this.intervalId&&clearInterval(this.intervalId)}};e.\u0275fac=function(i){return new(i||e)(a(T),a(c))},e.\u0275prov=s({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Q=(()=>{let e=class e{constructor(r,i,o,d,Z){this.storageService=r,this.requestsService=i,this.router=o,this.networkService=d,this.translate=Z,this.open=!1,this.currentVersion=F.version,this.initializeApp(),this.initLanguage()}initializeApp(){return n(this,null,function*(){})}initLanguage(){return n(this,null,function*(){this.translate.setDefaultLang("fr");let r=yield this.storageService.get("lang");r||(r="fr",yield this.storageService.set("lang",r)),this.translate.use(r),$(r)})}ngOnInit(){this.getConfig(),this.checkDivice(),setTimeout(()=>{this.open=!0},5e3)}ngOnDestroy(){return n(this,null,function*(){yield this.storageService.set("displayed_animation",!1)})}checkDivice(){return n(this,null,function*(){if(!(yield this.storageService.get("myUUID"))){let i=E();yield this.storageService.set("connected",!1),yield this.storageService.set("myUUID",i),yield this.saveDevice({uuid:i,type:"googleTv"})}})}getConfig(){this.requestsService.get("/config").subscribe({next:r=>n(this,null,function*(){let i=JSON.parse(this.requestsService.decrypt(r.data));parseInt(i.config.googleTvMinVersion)>=parseInt(this.currentVersion)&&this.router.navigate(["/update-version"]),Object.entries(i.config).forEach(Z=>n(this,[Z],function*([o,d]){o!=="createdAt"&&o!=="androidMinVersion"&&o!=="iosMinVersion"&&o!=="samsungTvMinVersion"&&o!=="updatedAt"&&o!=="_id"&&o!=="__v"&&(yield this.storageService.set(o,d))}))}),error:r=>{}})}saveDevice(r){this.requestsService.post("/devices",r).subscribe({next:i=>n(this,null,function*(){let o=JSON.parse(this.requestsService.decrypt(i.data))}),error:i=>{let o=JSON.parse(this.requestsService.decrypt(i.error.data))}})}};e.\u0275fac=function(i){return new(i||e)(p(q),p(J),p(c),p(K),p(O))},e.\u0275cmp=I({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(i,o){i&1&&(y(0,"ion-app"),C(1,"ion-router-outlet"),S())},dependencies:[R,k,w],encapsulation:2});let t=e;return t})();var X=(()=>{let e=class e{http;prefix;suffix;constructor(r,i="/assets/i18n/",o=".json"){this.http=r,this.prefix=i,this.suffix=o}getTranslation(r){return this.http.get(`${this.prefix}${r}${this.suffix}`)}};l(e,"\u0275fac",function(i){return new(i||e)(a(h),a(String),a(String))}),l(e,"\u0275prov",s({token:e,factory:e.\u0275fac}));let t=e;return t})();function et(t){return new X(t,"./assets/i18n/",".json")}var Y=m(A,V.forRoot({loader:{provide:H,useFactory:et,deps:[h]}}));j(Q,{providers:[{provide:M,useClass:U},L(),D(G,b(P)),m(N.forRoot()),x(),Y]});
